<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nai Nai Lapis | Lapis & Nastar Premium</title>
  <meta name="description" content="Nai Nai Lapis menghadirkan kue Lapis dan Nastar premium dengan rasa rumah yang hangat, dibuat telaten untuk momen spesial." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Display:wght@500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --espresso: #2b1b14;
      --caramel: #c98b2b;
      --cream: #fff2e3;
      --cinnamon: #9c5a3c;
      --red: #b3202e;
      --gold: #d9b76e;
      --paper: #fff8ef;
      --ink-soft: rgba(43, 27, 20, 0.82);
      --line: 1px solid rgba(43, 27, 20, 0.14);
      --radius-lg: 18px;
      --radius-md: 14px;
      --shadow: 0 14px 34px rgba(43, 27, 20, 0.14);
      --maxw: min(1140px, calc(100% - 2rem));
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", sans-serif;
      color: var(--espresso);
      background:
        radial-gradient(circle at 8% 8%, rgba(201, 139, 43, 0.2), transparent 34%),
        radial-gradient(circle at 90% 12%, rgba(179, 32, 46, 0.12), transparent 38%),
        linear-gradient(180deg, #fff9f0 0%, #fff2e3 100%);
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: repeating-linear-gradient(
        180deg,
        rgba(156, 90, 60, 0.05) 0,
        rgba(156, 90, 60, 0.05) 2px,
        transparent 2px,
        transparent 20px
      );
      z-index: -1;
    }

    .container {
      width: var(--maxw);
      margin: 0 auto;
    }

    .hero {
      margin-top: 0.8rem;
      border: var(--line);
      border-radius: var(--radius-lg);
      background:
        linear-gradient(145deg, rgba(43, 27, 20, 0.98), rgba(88, 49, 32, 0.95)),
        linear-gradient(180deg, rgba(179, 32, 46, 0.18), transparent 60%);
      color: var(--cream);
      padding: clamp(1rem, 3vw, 2.2rem);
      box-shadow: 0 18px 38px rgba(43, 27, 20, 0.26);
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 1rem;
      position: relative;
      overflow: hidden;
    }

    .hero::after {
      content: "";
      position: absolute;
      width: clamp(170px, 36vw, 360px);
      aspect-ratio: 1;
      border-radius: 50%;
      right: -12%;
      top: -26%;
      background: radial-gradient(circle, rgba(201, 139, 43, 0.35), transparent 70%);
      pointer-events: none;
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 0.75rem;
      position: relative;
      z-index: 1;
    }

    .logo-badge {
      width: 82px;
      height: 82px;
      border-radius: 16px;
      border: 1px solid rgba(255, 242, 227, 0.45);
      background: rgba(255, 242, 227, 0.08);
      overflow: hidden;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo-badge img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.06);
    }

    .logo-wrap span {
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255, 242, 227, 0.86);
    }

    .hero h1 {
      margin: 0;
      font-family: "Noto Serif Display", serif;
      font-size: clamp(2rem, 4.8vw, 4rem);
      line-height: 1.06;
      max-width: 12ch;
      position: relative;
      z-index: 1;
      text-wrap: balance;
    }

    .hero p {
      margin: 0.65rem 0 0;
      font-size: clamp(0.95rem, 2vw, 1.08rem);
      line-height: 1.7;
      color: rgba(255, 242, 227, 0.93);
      max-width: 58ch;
      position: relative;
      z-index: 1;
    }

    .announcement {
      margin-top: 0.95rem;
      display: inline-block;
      border: 1px solid rgba(255, 242, 227, 0.46);
      border-radius: 999px;
      padding: 0.33rem 0.72rem;
      font-size: 0.79rem;
      background: rgba(217, 183, 110, 0.16);
      position: relative;
      z-index: 1;
    }

    .hero-actions {
      margin-top: 1rem;
      display: flex;
      gap: 0.62rem;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }

    .btn {
      border-radius: 999px;
      font-weight: 600;
      text-decoration: none;
      padding: 0.72rem 1.15rem;
      font-size: 0.9rem;
      transition: transform 220ms ease, box-shadow 220ms ease, background 220ms ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid transparent;
      cursor: pointer;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn-main {
      background: var(--caramel);
      color: #2d190f;
      box-shadow: 0 10px 20px rgba(201, 139, 43, 0.36);
    }

    .btn-main:hover {
      background: #e0b05d;
      box-shadow: 0 13px 24px rgba(201, 139, 43, 0.42);
    }

    .btn-alt {
      border-color: rgba(255, 242, 227, 0.5);
      color: var(--cream);
      background: rgba(255, 242, 227, 0.08);
    }

    .hero-card {
      border: 1px solid rgba(255, 242, 227, 0.25);
      border-radius: var(--radius-md);
      padding: 0.75rem;
      background: rgba(255, 242, 227, 0.08);
      backdrop-filter: blur(4px);
      align-self: end;
      position: relative;
      z-index: 1;
    }

    .hero-card h3 {
      margin: 0;
      font-family: "Noto Serif Display", serif;
      font-size: 1.35rem;
      line-height: 1.25;
    }

    .hero-card p {
      margin: 0.45rem 0 0;
      font-size: 0.92rem;
      line-height: 1.55;
      color: rgba(255, 242, 227, 0.88);
    }

    .hero-card ul {
      list-style: none;
      margin: 0.7rem 0 0;
      padding: 0;
      display: grid;
      gap: 0.42rem;
      font-size: 0.85rem;
    }

    .hero-card li {
      border: 1px solid rgba(255, 242, 227, 0.22);
      background: rgba(255, 242, 227, 0.08);
      border-radius: 10px;
      padding: 0.35rem 0.52rem;
      color: rgba(255, 242, 227, 0.92);
    }

    .section {
      margin-top: clamp(2rem, 5vw, 3.3rem);
    }

    .section h2 {
      margin: 0;
      font-family: "Noto Serif Display", serif;
      font-size: clamp(1.6rem, 3vw, 2.6rem);
      line-height: 1.2;
      text-wrap: balance;
      color: #351f15;
    }

    .section p.lead {
      margin: 0.68rem 0 0;
      color: var(--ink-soft);
      max-width: 68ch;
      line-height: 1.68;
    }

    .product-grid {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .product-card {
      border: var(--line);
      border-radius: var(--radius-lg);
      background: rgba(255, 242, 227, 0.84);
      box-shadow: var(--shadow);
      padding: 0.9rem;
      display: grid;
      gap: 0.8rem;
    }

    .product-head {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.6rem;
    }

    .product-head h3 {
      margin: 0;
      font-family: "Noto Serif Display", serif;
      font-size: 1.5rem;
      line-height: 1.2;
      color: #3f2418;
    }

    .badge {
      background: rgba(201, 139, 43, 0.22);
      border: var(--line);
      color: #4b2e21;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      padding: 0.26rem 0.55rem;
      white-space: nowrap;
    }

    .gallery {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.56rem;
    }

    .gallery figure {
      margin: 0;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(43, 27, 20, 0.2);
      background: #fff;
      display: flex;
      flex-direction: column;
    }

    .gallery-media {
      height: clamp(300px, 36vw, 490px);
      background: linear-gradient(180deg, #f4e7d1, #f7ede0);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.36rem;
    }

    .gallery img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      background: #f4ead8;
    }

    .gallery figcaption {
      padding: 0.36rem 0.5rem;
      font-size: 0.74rem;
      color: rgba(43, 27, 20, 0.72);
      background: #fff9f1;
      border-top: 1px solid rgba(43, 27, 20, 0.14);
    }

    .product-copy {
      margin: 0;
      color: var(--ink-soft);
      line-height: 1.62;
      font-size: 0.94rem;
    }

    .size-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }

    .size-pill {
      border-radius: 999px;
      border: 1px solid rgba(156, 90, 60, 0.3);
      background: #fff9f0;
      color: #5a3425;
      font-size: 0.8rem;
      padding: 0.26rem 0.66rem;
    }

    .price-section {
      margin-top: 1rem;
      border: var(--line);
      border-radius: var(--radius-lg);
      background: rgba(255, 242, 227, 0.84);
      box-shadow: var(--shadow);
      padding: 0.95rem;
    }

    .price-figure {
      margin: 0.8rem auto 0;
      border: 1px solid rgba(43, 27, 20, 0.18);
      border-radius: 14px;
      overflow: hidden;
      background: #fff;
      width: min(100%, 560px);
      padding: 0.5rem;
    }

    .price-figure img {
      display: block;
      width: 100%;
      max-height: none;
      height: auto;
      object-fit: contain;
      background: #fffdf9;
      border-radius: 10px;
    }

    .price-note {
      margin-top: 0.45rem;
      font-size: 0.84rem;
      color: rgba(43, 27, 20, 0.7);
    }

    .order-wrap {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 1rem;
      align-items: start;
    }

    .order-info {
      border: var(--line);
      border-radius: var(--radius-lg);
      background: rgba(255, 242, 227, 0.86);
      box-shadow: var(--shadow);
      padding: 1rem;
    }

    .order-info h3 {
      margin: 0;
      font-family: "Noto Serif Display", serif;
      font-size: 1.5rem;
      line-height: 1.2;
      color: #3a2217;
    }

    .order-info p {
      margin: 0.62rem 0 0;
      line-height: 1.65;
      color: var(--ink-soft);
      font-size: 0.96rem;
    }

    .order-tags {
      margin-top: 0.82rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .order-tags span {
      border: 1px solid rgba(43, 27, 20, 0.16);
      background: rgba(255, 255, 255, 0.7);
      border-radius: 999px;
      padding: 0.28rem 0.6rem;
      font-size: 0.8rem;
      color: #4b2d20;
    }

    .order-form {
      border: 1px solid rgba(255, 242, 227, 0.22);
      border-radius: var(--radius-md);
      background: rgba(43, 27, 20, 0.94);
      color: var(--cream);
      padding: 0.95rem;
      display: grid;
      gap: 0.64rem;
    }

    .order-form h3 {
      margin: 0;
      font-size: 1.03rem;
      font-weight: 600;
      letter-spacing: 0.01em;
    }

    .field label {
      display: block;
      font-size: 0.79rem;
      margin-bottom: 0.2rem;
      color: rgba(255, 242, 227, 0.86);
    }

    .field input,
    .field select,
    .field textarea {
      width: 100%;
      border: 1px solid rgba(255, 242, 227, 0.26);
      border-radius: 10px;
      background: rgba(255, 242, 227, 0.1);
      color: #fff;
      padding: 0.58rem 0.62rem;
      font-size: 0.87rem;
      font-family: "Inter", sans-serif;
      outline: none;
    }

    .field select option {
      color: #2b1b14;
    }

    .field textarea {
      min-height: 74px;
      resize: vertical;
    }

    .field input::placeholder,
    .field textarea::placeholder {
      color: rgba(255, 242, 227, 0.7);
    }

    .status-message {
      margin: 0;
      font-size: 0.8rem;
      color: rgba(255, 242, 227, 0.9);
      min-height: 1em;
    }

    .final-cta {
      margin: 1.2rem 0 2.2rem;
      border: var(--line);
      border-radius: var(--radius-lg);
      background: linear-gradient(135deg, rgba(43, 27, 20, 0.94), rgba(82, 45, 30, 0.94));
      color: var(--cream);
      box-shadow: 0 18px 34px rgba(43, 27, 20, 0.26);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      flex-wrap: wrap;
    }

    .final-cta h3 {
      margin: 0;
      font-family: "Noto Serif Display", serif;
      font-size: clamp(1.2rem, 2.3vw, 1.7rem);
      line-height: 1.3;
    }

    .final-cta p {
      margin: 0.45rem 0 0;
      max-width: 50ch;
      color: rgba(255, 242, 227, 0.88);
      font-size: 0.92rem;
      line-height: 1.6;
    }

    .fade {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 540ms ease, transform 540ms ease;
    }

    .fade.show {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 980px) {
      .hero,
      .order-wrap,
      .product-grid {
        grid-template-columns: 1fr;
      }

      .gallery-media {
        height: clamp(320px, 60vw, 540px);
      }
    }

    @media (max-width: 640px) {
      .container {
        width: min(1140px, calc(100% - 1rem));
      }

      .hero {
        margin-top: 0.5rem;
        padding: 0.9rem;
      }

      .logo-badge {
        width: 66px;
        height: 66px;
      }

      .gallery {
        grid-template-columns: 1fr;
      }

      .gallery-media {
        height: clamp(320px, 88vw, 560px);
      }
    }
  </style>
</head>
<body>
  <div id="navbar"></div>

  <main class="container">
    <section class="hero fade">
      <div>
        <div class="logo-wrap">
          <div class="logo-badge">
            <img src="./logonainai.png" alt="Logo Nai Nai Lapis" />
          </div>
          <span>Products &gt; Class &gt; Cake &amp; Bakery Class</span>
        </div>
        <h1 id="hero-title">Rasa rumah, dalam setiap lapis.</h1>
        <p id="hero-subtitle">
          Ada Lapis dan Nastar hangat dari dapur Nai Nai, cocok buat momen keluarga,
          kirim hampers, atau sekadar self reward hari ini.
        </p>
        <div class="announcement" id="announcement">Hari ini open pre-order, bisa request kirim sesuai jadwal.</div>
        <div class="hero-actions">
          <a class="btn btn-main track-click" data-track-label="hero_preorder" href="#order">Pre-order sekarang</a>
          <a class="btn btn-alt track-click" data-track-label="hero_pricelist" href="#pricelist">Lihat pricelist</a>
        </div>
      </div>

      <aside class="hero-card">
        <h3>Dua produk utama Nai Nai</h3>
        <p>Lapis dan Nastar dibuat telaten, rasanya hangat, tampilannya cantik, dan siap jadi hadiah manis.</p>
        <ul>
          <li>Lapis: tersedia ukuran 10x10, 10x20, 20x20</li>
          <li>Nastar: tersedia juga opsi pack toples</li>
          <li>Lapis Imlek: tersedia saat event seasonal</li>
        </ul>
      </aside>
    </section>

    <section class="section fade" id="produk">
      <h2>Produk Nai Nai Lapis</h2>
      <p class="lead">
        Pilihan utamanya ada dua: <strong>Lapis</strong> dan <strong>Nastar</strong>.
        Tinggal pilih yang paling pas buat momen kamu.
      </p>

      <div class="product-grid">
        <article class="product-card" id="produk-lapis">
          <div class="product-head">
            <h3>Lapis</h3>
            <span class="badge">Signature</span>
          </div>
          <div class="gallery">
            <figure>
              <div class="gallery-media">
                <img src="./Nai Nai Lapis - Original.png" alt="Nai Nai Lapis Original" />
              </div>
              <figcaption>Nai Nai Lapis - Original</figcaption>
            </figure>
            <figure>
              <div class="gallery-media">
                <img src="./Nai Nai Lapis - Imlek.png" alt="Nai Nai Lapis Imlek" />
              </div>
              <figcaption>Nai Nai Lapis - Imlek (event/seasonal)</figcaption>
            </figure>
          </div>
          <p class="product-copy">
            Lapis legit dengan lapisan rapi, tekstur lembut, dan rasa yang comforting. Cocok untuk keluarga atau kirim hadiah.
          </p>
          <div>
            <strong style="font-size:0.88rem; color:#5a3425;">Ukuran Lapis:</strong>
            <div class="size-list" id="lapis-size-list">
              <span class="size-pill">10 x 10</span>
              <span class="size-pill">10 x 20</span>
              <span class="size-pill">20 x 20</span>
            </div>
          </div>
          <div class="hero-actions" style="margin-top:0.35rem;">
            <a class="btn btn-main track-click" data-track-label="cta_lapis_order" href="#order">Pesan Lapis</a>
          </div>
        </article>

        <article class="product-card" id="produk-nastar">
          <div class="product-head">
            <h3>Nastar</h3>
            <span class="badge">Butter Series</span>
          </div>
          <div class="gallery">
            <figure>
              <div class="gallery-media">
                <img src="./Nastar1.jpeg" alt="Nastar Nai Nai Lapis" />
              </div>
              <figcaption>Nastar Fresh Batch</figcaption>
            </figure>
            <figure>
              <div class="gallery-media">
                <img src="./Nastar2.jpeg" alt="Nastar Nai Nai Lapis dengan toples" />
              </div>
              <figcaption>Nastar + Pack Toples</figcaption>
            </figure>
          </div>
          <p class="product-copy">
            Nastar buttery dengan isian nanas yang pas manisnya. Enak buat suguhan rumah, oleh-oleh, atau hampers.
          </p>
          <div class="hero-actions" style="margin-top:0.35rem;">
            <a class="btn btn-main track-click" data-track-label="cta_nastar_order" href="#order">Pesan Nastar</a>
          </div>
        </article>
      </div>
    </section>

    <section class="section fade" id="pricelist">
      <h2>Pricelist</h2>
      <p class="lead">Biar gampang pilih, ini daftar harga Lapis dan Nastar terbaru.</p>
      <article class="price-section">
        <figure class="price-figure">
          <img id="pricelist-image" src="./Pricelist.jpeg" alt="Pricelist Nai Nai Lapis" />
        </figure>
        <p class="price-note" id="pricelist-note">Kalau pricelist belum tampil, boleh langsung chat admin untuk info harga terbaru.</p>
      </article>
    </section>

    <section class="section fade" id="order">
      <h2>Yuk Order</h2>
      <p class="lead">
        Isi singkat form ini, nanti kamu langsung diarahkan ke WhatsApp admin untuk lanjut pesan.
      </p>

      <div class="order-wrap">
        <article class="order-info">
          <h3>Pesan cepat lewat WhatsApp</h3>
          <p>
            Cocok untuk pre-order harian, kebutuhan hampers, atau titip kirim ke keluarga dan teman.
          </p>
          <div class="order-tags">
            <span>Fast response</span>
            <span>Bisa request jadwal kirim</span>
            <span>Ramah untuk hampers</span>
          </div>
        </article>

        <form class="order-form" id="order-form">
          <h3>Form Order Nai Nai Lapis</h3>
          <div class="field">
            <label for="order-name">Nama</label>
            <input id="order-name" name="name" type="text" placeholder="Nama lengkap" required />
          </div>
          <div class="field">
            <label for="order-wa">WhatsApp</label>
            <input id="order-wa" name="whatsapp" type="text" placeholder="08xxxxxxxxxx" required />
          </div>
          <div class="field">
            <label for="order-product">Produk</label>
            <select id="order-product" name="product" required>
              <option value="">Pilih produk</option>
              <option value="Lapis">Lapis</option>
              <option value="Nastar">Nastar</option>
            </select>
          </div>
          <div class="field" id="size-field">
            <label for="order-size">Ukuran Lapis</label>
            <select id="order-size" name="size">
              <option value="">Pilih ukuran</option>
              <option value="10 x 10">10 x 10</option>
              <option value="10 x 20">10 x 20</option>
              <option value="20 x 20">20 x 20</option>
            </select>
          </div>
          <div class="field">
            <label for="order-notes">Catatan</label>
            <textarea id="order-notes" name="notes" placeholder="Contoh: ambil varian Imlek untuk hampers kantor"></textarea>
          </div>
          <button class="btn btn-main" type="submit">Lanjut ke WhatsApp</button>
          <p class="status-message" id="order-status"></p>
        </form>
      </div>
    </section>

    <section class="final-cta fade">
      <div>
        <h3>Mau dibantu pilih Lapis atau Nastar?</h3>
        <p>
          Klik tombol order, nanti tim kami bantu dari pilihan produk sampai jadwal kirim.
        </p>
      </div>
      <a class="btn btn-main track-click" data-track-label="footer_order_now" href="#order">Order sekarang</a>
    </section>
  </main>

  <div id="footer-placeholder"></div>

  <script>
    var ADMIN_WA = "6288972861212";
    var PAGE_PATH = window.location.pathname;

    function normalizeTo62(rawPhone) {
      var value = String(rawPhone || "").replace(/[^0-9+]/g, "").trim();
      if (!value) return "";
      if (value.indexOf("+") === 0) value = value.slice(1);
      if (value.indexOf("08") === 0) value = "62" + value.slice(1);
      else if (value.indexOf("8") === 0) value = "62" + value;
      else if (value.indexOf("62") !== 0) value = "62" + value;
      return value;
    }

    function bindDropdowns() {
      var toggle = document.getElementById("dropdownToggle");
      var menu = document.getElementById("dropdownMenu");
      var toggle2 = document.getElementById("dropdownToggleEcourse");
      var menu2 = document.getElementById("dropdownMenuEcourse");

      if (toggle && menu && !toggle.dataset.bound) {
        toggle.dataset.bound = "true";
        toggle.addEventListener("click", function (event) {
          event.preventDefault();
          menu.style.display = menu.style.display === "block" ? "none" : "block";
        });
        document.addEventListener("click", function (event) {
          if (!toggle.contains(event.target) && !menu.contains(event.target)) {
            menu.style.display = "none";
          }
        });
      }

      if (toggle2 && menu2 && !toggle2.dataset.bound) {
        toggle2.dataset.bound = "true";
        toggle2.addEventListener("click", function (event) {
          event.preventDefault();
          menu2.style.display = menu2.style.display === "block" ? "none" : "block";
        });
        document.addEventListener("click", function (event) {
          if (!toggle2.contains(event.target) && !menu2.contains(event.target)) {
            menu2.style.display = "none";
          }
        });
      }
    }

    function trackEvent(label, product, size, meta) {
      fetch("/api/nainai/events", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          eventType: "click",
          label: label || "unknown",
          product: product || "",
          size: size || "",
          sourcePage: PAGE_PATH,
          meta: meta || {}
        })
      }).catch(function () {
        return null;
      });
    }

    function applyConfig(config) {
      if (!config || typeof config !== "object") return;

      if (config.heroTitle) {
        var heroTitle = document.getElementById("hero-title");
        if (heroTitle) heroTitle.textContent = config.heroTitle;
      }
      if (config.heroSubtitle) {
        var heroSubtitle = document.getElementById("hero-subtitle");
        if (heroSubtitle) heroSubtitle.textContent = config.heroSubtitle;
      }
      if (config.announcement) {
        var announcement = document.getElementById("announcement");
        if (announcement) announcement.textContent = config.announcement;
      }
      if (config.adminWhatsapp) {
        var normalized = normalizeTo62(config.adminWhatsapp);
        if (normalized) ADMIN_WA = normalized;
      }
      if (Array.isArray(config.lapisSizes) && config.lapisSizes.length) {
        var listWrap = document.getElementById("lapis-size-list");
        var selectSize = document.getElementById("order-size");
        if (listWrap) {
          listWrap.innerHTML = "";
          config.lapisSizes.forEach(function (size) {
            var span = document.createElement("span");
            span.className = "size-pill";
            span.textContent = size;
            listWrap.appendChild(span);
          });
        }
        if (selectSize) {
          selectSize.innerHTML = '<option value="">Pilih ukuran</option>';
          config.lapisSizes.forEach(function (size) {
            var opt = document.createElement("option");
            opt.value = size;
            opt.textContent = size;
            selectSize.appendChild(opt);
          });
        }
      }
    }

    function loadConfig() {
      fetch("/api/nainai/config")
        .then(function (res) {
          return res.json();
        })
        .then(function (payload) {
          if (payload && payload.ok && payload.config) {
            applyConfig(payload.config);
          }
        })
        .catch(function () {
          return null;
        });
    }

    fetch("/navbar.html")
      .then(function (response) {
        return response.text();
      })
      .then(function (html) {
        document.getElementById("navbar").innerHTML = html;
        bindDropdowns();
      });

    fetch("/footer.html")
      .then(function (response) {
        return response.text();
      })
      .then(function (html) {
        document.getElementById("footer-placeholder").innerHTML = html;
      });

    loadConfig();

    var priceImage = document.getElementById("pricelist-image");
    if (priceImage) {
      priceImage.addEventListener("error", function () {
        priceImage.style.display = "none";
        var note = document.getElementById("pricelist-note");
        if (note) {
          note.textContent = "Pricelist sedang diperbarui. Langsung chat admin untuk harga terbaru, ya.";
        }
      });
    }

    var trackButtons = Array.prototype.slice.call(document.querySelectorAll(".track-click"));
    trackButtons.forEach(function (btn) {
      btn.addEventListener("click", function () {
        trackEvent(btn.getAttribute("data-track-label") || "cta_click");
      });
    });

    var orderProduct = document.getElementById("order-product");
    var sizeField = document.getElementById("size-field");
    var orderSize = document.getElementById("order-size");

    function toggleSizeField() {
      var product = orderProduct ? orderProduct.value : "";
      if (!sizeField) return;
      if (product === "Lapis") {
        sizeField.style.display = "block";
        if (orderSize) orderSize.required = true;
      } else {
        sizeField.style.display = "none";
        if (orderSize) {
          orderSize.required = false;
          orderSize.value = "";
        }
      }
    }

    if (orderProduct) {
      orderProduct.addEventListener("change", function () {
        toggleSizeField();
      });
    }
    toggleSizeField();

    var form = document.getElementById("order-form");
    var statusText = document.getElementById("order-status");

    if (form) {
      form.addEventListener("submit", function (event) {
        event.preventDefault();

        var name = (document.getElementById("order-name").value || "").trim();
        var customerWa = (document.getElementById("order-wa").value || "").trim();
        var product = (document.getElementById("order-product").value || "").trim();
        var size = (document.getElementById("order-size").value || "").trim();
        var notes = (document.getElementById("order-notes").value || "").trim();

        if (!name || !customerWa || !product) {
          if (statusText) statusText.textContent = "Boleh dilengkapi dulu data wajibnya, ya.";
          return;
        }
        if (product === "Lapis" && !size) {
          if (statusText) statusText.textContent = "Pilih ukuran Lapis dulu, ya.";
          return;
        }

        if (statusText) statusText.textContent = "Sebentar, kami proses dulu...";

        var payload = {
          name: name,
          whatsapp: customerWa,
          product: product,
          size: size,
          notes: notes,
          sourcePage: PAGE_PATH
        };

        fetch("/api/nainai/order", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        })
          .then(function (res) {
            return res.json().catch(function () {
              return { ok: false };
            });
          })
          .then(function (result) {
            var adminWa = normalizeTo62((result && result.adminWhatsapp) || ADMIN_WA || "6288972861212");
            if (!adminWa) adminWa = "6288972861212";

            var textLines = [
              "Halo Admin Nai Nai Lapis, saya ingin order:",
              "",
              "Nama: " + name,
              "WhatsApp: " + customerWa,
              "Produk: " + product,
              "Ukuran: " + (size || "-"),
              "Catatan: " + (notes || "-")
            ];
            var waUrl = "https://wa.me/" + adminWa + "?text=" + encodeURIComponent(textLines.join("\n"));

            trackEvent("form_submit_order", product, size, { hasNotes: notes ? 1 : 0 });
            window.open(waUrl, "_blank", "noopener,noreferrer");

            if (statusText) {
              if (result && result.ok) {
                statusText.textContent = "Siap, WhatsApp admin sedang dibuka.";
              } else {
                statusText.textContent = "Order tetap lanjut ke WhatsApp admin.";
              }
            }
            form.reset();
            toggleSizeField();
          })
          .catch(function () {
            var adminWa = normalizeTo62(ADMIN_WA || "6288972861212");
            if (!adminWa) adminWa = "6288972861212";
            var backupText = [
              "Halo Admin Nai Nai Lapis, saya ingin order:",
              "",
              "Nama: " + name,
              "WhatsApp: " + customerWa,
              "Produk: " + product,
              "Ukuran: " + (size || "-"),
              "Catatan: " + (notes || "-")
            ].join("\n");
            window.open("https://wa.me/" + adminWa + "?text=" + encodeURIComponent(backupText), "_blank", "noopener,noreferrer");
            if (statusText) statusText.textContent = "Koneksi lagi kurang stabil, tapi WhatsApp admin tetap kebuka.";
          });
      });
    }

    var fades = Array.prototype.slice.call(document.querySelectorAll(".fade"));
    if ("IntersectionObserver" in window) {
      var observer = new IntersectionObserver(function (entries, obs) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add("show");
            obs.unobserve(entry.target);
          }
        });
      }, { threshold: 0.16 });

      fades.forEach(function (item) {
        observer.observe(item);
      });
    } else {
      fades.forEach(function (item) {
        item.classList.add("show");
      });
    }
  </script>
</body>
</html>
