<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tracing Huruf - Level A1</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand+SC&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 10px;
            padding: 0;
            background: #f9f9f9;
        }
        #worksheet-container {
            width: 794px;
            height: 1123px;
            margin: 0 auto;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .trace-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .trace-letter {
            position: relative;
            border: 2px solid #aaa;
            border-radius: 6px;
            height: auto;
            aspect-ratio: 1 / 1;
            padding: 10px;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 48px;
            color: transparent;
            -webkit-text-stroke: 1.5px #333;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .trace-letter.outlined {
            color: transparent;
            -webkit-text-stroke: 1.5px #333;
        }
        .trace-letter .step-number {
            position: absolute;
            top: 4px;
            left: 6px;
            font-size: 14px;
            color: #555;
            font-weight: 600;
            user-select: none;
            z-index: 3;
        }
        .trace-letter canvas.trace-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: auto;
            background-color: transparent;
        }
        #image-letter-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: nowrap;
        }
        /* Force all image+judul containers to sit on one row */
        [id^="image-letter-container"] {
            display: flex !important;
            align-items: center !important;
            gap: 20px !important;
            flex-wrap: nowrap !important;
        }
        /* Make images scale responsively without squashing */
        [id^="image-letter-container"] img {
            height: auto;
            width: auto;
            max-width: 100%;
            object-fit: contain;
            display: inline-block;
        }
        [id^="image-letter-container"] > div {
            flex: 0 0 auto; /* jangan menyusut, biar ukuran gambar tetap proporsional */
            text-align: center;
        }
        #image-letter-container .chicken {
            font-size: 120px;
            user-select: none;
        }
        #image-letter-container .big-letter {
            font-size: 120px;
            font-weight: 700;
            color: #d33;
            user-select: none;
        }
        #writing-steps {
            font-size: 18px;
            color: #444;
            margin-top: 10px;
            line-height: 1.4;
        }
        #message {
            margin-top: 20px;
            font-size: 22px;
            font-weight: 700;
            color: green;
            text-align: center;
            user-select: none;
        }
        /* Responsive for small screens */
        @media (max-width: 480px) {
            [id^="image-letter-container"] {
                flex-direction: row !important;
                overflow-x: auto;
            }
            .trace-letter {
                height: 60px;
                font-size: 36px;
            }
            #image-letter-container .chicken,
            #image-letter-container .big-letter {
                font-size: 90px;
            }
            #writing-steps {
                font-size: 16px;
            }
        }
        .worksheet-slide { width: 100%; }
}
        /* Tool bar for brush/eraser */
        .tool-bar { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
        .tool-btn { padding:8px 10px; border:1px solid #ccc; background:#fff; border-radius:8px; cursor:pointer; font-weight:600; }
        .tool-btn[aria-pressed="true"] { border-color:#111827; box-shadow:0 0 0 2px rgba(59,130,246,.25) inset; }
    </style>

  <link rel="stylesheet" href="/elearn/worlds/calistung/buttons.css" />
</head>
<body>
  <div id="worksheetRoot" data-course-id="numbers-basic" data-lesson-id="L1">
    <div style="max-width:794px;margin:0 auto 10px auto;display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap">
        <label for="worksheet-select" style="font-weight:600">Pilih Worksheet:</label>
        <select id="worksheet-select" aria-label="Pilih worksheet huruf" style="padding:8px 10px;border-radius:6px;border:1px solid #ccc;min-width:160px;">
            <option value="a" selected>Huruf A</option>
            <option value="b">Huruf B</option>
            <option value="c">Huruf C</option>
            <option value="d">Huruf D</option>
            <option value="e">Huruf E</option>
            <option value="f">Huruf F</option>
            <option value="g">Huruf G</option>
            <option value="h">Huruf H</option>
            <option value="i">Huruf I</option>
            <option value="j">Huruf J</option>
            <option value="k">Huruf K</option>
            <option value="l">Huruf L</option>
            <option value="m">Huruf M</option>
            <option value="n">Huruf N</option>
            <option value="o">Huruf O</option>
            <option value="p">Huruf P</option>
            <option value="q">Huruf Q</option>
            <option value="r">Huruf R</option>
            <option value="s">Huruf S</option>
            <option value="t">Huruf T</option>
            <option value="u">Huruf U</option>
            <option value="v">Huruf V</option>
            <option value="w">Huruf W</option>
            <option value="x">Huruf X</option>
            <option value="y">Huruf Y</option>
            <option value="z">Huruf Z</option>
        </select>
        <div class="tool-bar" role="group" aria-label="Alat menggambar">
          <button id="btnBrush" type="button" class="tool-btn" aria-pressed="true" aria-label="Pena warna-warni">üñäÔ∏è Brush</button>
          <button id="btnEraser" type="button" class="tool-btn" aria-pressed="false" aria-label="Penghapus">üßΩ Eraser</button>
        </div>
        <small id="coming-soon-note" style="color:#777;display:none">Worksheet huruf ini sedang disiapkan.</small>
    </div>
    <div id="slide-a" class="worksheet-slide" data-letter="a" style="display:block;">
        <div id="worksheet-container" aria-label="Worksheet huruf a">
            <div id="image-letter-container">
                <div class="chicken" aria-label="Gambar ayam" role="img">
                    <img src="/elearn/calistung/assets/alfabet/a-image.png" alt="Gambar ayam" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/a-judul.png" alt="Huruf A" style="width: 200px; height: auto;" />
                    <div id="writing-steps" aria-live="polite">
                        Langkah menulis huruf a:<br>
                        1. Mulai dari atas ke bawah.<br>
                        2. Mulai dari atas melingkar ke bawah dan ke kanan.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-a" aria-label="Soal tracing huruf a">
                <!-- Kotak tracing huruf akan dibuat di sini oleh JS -->
            </div>
            <div id="message-a" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-b" class="worksheet-slide" data-letter="b" style="display:none;">
        <div id="worksheet-container-b" aria-label="Worksheet huruf b" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-b" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/b-image.png" alt="Gambar untuk huruf b" style="width: 320px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/b-judul.png" alt="Huruf B" style="width: 200px; height: auto;" />
                    <div id="writing-steps-b" aria-live="polite">
                        Langkah menulis huruf b:<br>
                        1. Tarik garis lurus dari atas ke bawah.<br>
                        2. Buat setengah lingkaran dari tengah ke kanan lalu ke bawah.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-b" aria-label="Soal tracing huruf b"></div>
            <div id="message-b" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-c" class="worksheet-slide" data-letter="c" style="display:none;">
        <div id="worksheet-container-c" aria-label="Worksheet huruf c" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-c" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/c-image.png" alt="Gambar untuk huruf c" style="width: 300px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/c-judul.png" alt="Huruf C" style="width: 200px; height: auto;" />
                    <div id="writing-steps-c" aria-live="polite">
                        Langkah menulis huruf c:<br>
                        1. Mulai dari tengah atas melengkung ke kiri bawah.<br>
                        2. Lanjutkan lengkungan hingga kembali ke sisi kanan atas<br>tanpa menutup lingkaran.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-c" aria-label="Soal tracing huruf c"></div>
            <div id="message-c" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-d" class="worksheet-slide" data-letter="d" style="display:none;">
        <div id="worksheet-container-d" aria-label="Worksheet huruf d" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-d" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/d-image.png" alt="Gambar untuk huruf d" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/d-judul.png" alt="Huruf D" style="width: 200px; height: auto;" />
                    <div id="writing-steps-d" aria-live="polite">
                        Langkah menulis huruf d:<br>
                        1. Buat lingkaran kecil seperti huruf c.<br>
                        2. Tambahkan garis lurus ke atas di sisi kanan lingkaran.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-d" aria-label="Soal tracing huruf d"></div>
            <div id="message-d" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-e" class="worksheet-slide" data-letter="e" style="display:none;">
        <div id="worksheet-container-e" aria-label="Worksheet huruf e" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-e" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/e-image.png" alt="Gambar untuk huruf e" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/e-judul.png" alt="Huruf E" style="width: 200px; height: auto;" />
                    <div id="writing-steps-e" aria-live="polite">
                        Langkah menulis huruf e:<br>
                        1. Buat lengkungan kecil ke kanan dari tengah,<br>seperti setengah lingkaran.<br>
                        2. Lanjutkan garis melengkung ke kiri bawah<br>untuk membentuk huruf e kecil.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-e" aria-label="Soal tracing huruf e"></div>
            <div id="message-e" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-f" class="worksheet-slide" data-letter="f" style="display:none;">
        <div id="worksheet-container-f" aria-label="Worksheet huruf f" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-f" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/f-image.png" alt="Gambar untuk huruf f" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/f-judul.png" alt="Huruf F" style="width: 200px; height: auto;" />
                    <div id="writing-steps-f" aria-live="polite">
                        Langkah menulis huruf f:<br>
                        1. Tarik garis melengkung dari atas ke bawah (seperti kail).<br>
                        2. Tambahkan garis kecil mendatar di tengah sebagai palang.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-f" aria-label="Soal tracing huruf f"></div>
            <div id="message-f" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-g" class="worksheet-slide" data-letter="g" style="display:none;">
        <div id="worksheet-container-g" aria-label="Worksheet huruf g" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-g" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/g-image.png" alt="Gambar untuk huruf g" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/g-judul.png" alt="Huruf G" style="width: 200px; height: auto;" />
                    <div id="writing-steps-g" aria-live="polite">
                        Langkah menulis huruf g:<br>
                        1. Buat lingkaran kecil (seperti huruf o).<br>
                        2. Tambahkan ekor ke bawah di sisi kanan,<br>melengkung ke kiri bawah.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-g" aria-label="Soal tracing huruf g"></div>
            <div id="message-g" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-h" class="worksheet-slide" data-letter="h" style="display:none;">
        <div id="worksheet-container-h" aria-label="Worksheet huruf h" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-h" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/h-image.png" alt="Gambar untuk huruf h" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/h-judul.png" alt="Huruf H" style="width: 200px; height: auto;" />
                    <div id="writing-steps-h" aria-live="polite">
                        Langkah menulis huruf h:<br>
                        1. Tarik garis lurus dari atas ke bawah di kiri.<br>
                        2. Dari tengah, buat lengkungan kecil ke kanan<br>lalu turun ke bawah.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-h" aria-label="Soal tracing huruf h"></div>
            <div id="message-h" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-i" class="worksheet-slide" data-letter="i" style="display:none;">
        <div id="worksheet-container-i" aria-label="Worksheet huruf i" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-i" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/i-image.png" alt="Gambar untuk huruf i" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/i-judul.png" alt="Huruf I" style="width: 200px; height: auto;" />
                    <div id="writing-steps-i" aria-live="polite">
                        Langkah menulis huruf i:<br>
                        1. Tarik garis lurus pendek dari atas ke bawah.<br>
                        2. Tambahkan titik kecil di atas garis untuk huruf i kecil.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-i" aria-label="Soal tracing huruf i"></div>
            <div id="message-i" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-j" class="worksheet-slide" data-letter="j" style="display:none;">
        <div id="worksheet-container-j" aria-label="Worksheet huruf j" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-j" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/j-image.png" alt="Gambar untuk huruf j" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/j-judul.png" alt="Huruf J" style="width: 200px; height: auto;" />
                    <div id="writing-steps-j" aria-live="polite">
                        Langkah menulis huruf j:<br>
                        1. Tarik garis lurus ke bawah<br>dan lengkungkan sedikit ke kiri bawah.<br>
                        2. Tambahkan titik kecil di atas untuk huruf j kecil.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-j" aria-label="Soal tracing huruf j"></div>
            <div id="message-j" role="alert" aria-live="assertive"></div>
        </div>
    </div>
    <div id="slide-k" class="worksheet-slide" data-letter="k" style="display:none;">
        <div id="worksheet-container-k" aria-label="Worksheet huruf k" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-k" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/k-image.png" alt="Gambar untuk huruf k" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/k-judul.png" alt="Huruf K" style="width: 200px; height: auto;" />
                    <div id="writing-steps-k" aria-live="polite">
                        Langkah menulis huruf k:<br>
                        1. Tarik garis lurus ke bawah di sebelah kiri.<br>
                        2. Dari tengah, buat garis miring ke kanan atas<br>lalu ke kanan bawah.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-k" aria-label="Soal tracing huruf k"></div>
            <div id="message-k" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-l" class="worksheet-slide" data-letter="l" style="display:none;">
        <div id="worksheet-container-l" aria-label="Worksheet huruf l" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-l" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/l-image.png" alt="Gambar untuk huruf l" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/l-judul.png" alt="Huruf L" style="width: 200px; height: auto;" />
                    <div id="writing-steps-l" aria-live="polite">
                        Langkah menulis huruf l:<br>
                        1. Tarik garis lurus dari atas ke bawah.<br>
                        2. Tambahkan sedikit kait di bagian bawah jika perlu.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-l" aria-label="Soal tracing huruf l"></div>
            <div id="message-l" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-m" class="worksheet-slide" data-letter="m" style="display:none;">
        <div id="worksheet-container-m" aria-label="Worksheet huruf m" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-m" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/m-image.png" alt="Gambar untuk huruf m" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/m-judul.png" alt="Huruf M" style="width: 200px; height: auto;" />
                    <div id="writing-steps-m" aria-live="polite">
                        Langkah menulis huruf m:<br>
                        1. Buat garis vertikal pendek.<br>
                        2. Tambahkan dua lengkungan kecil berurutan ke kanan.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-m" aria-label="Soal tracing huruf m"></div>
            <div id="message-m" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-n" class="worksheet-slide" data-letter="n" style="display:none;">
        <div id="worksheet-container-n" aria-label="Worksheet huruf n" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-n" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/n-image.png" alt="Gambar untuk huruf n" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/n-judul.png" alt="Huruf N" style="width: 200px; height: auto;" />
                    <div id="writing-steps-n" aria-live="polite">
                        Langkah menulis huruf n:<br>
                        1. Buat garis vertikal pendek.<br>
                        2. Tambahkan satu lengkungan kecil ke kanan.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-n" aria-label="Soal tracing huruf n"></div>
            <div id="message-n" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-o" class="worksheet-slide" data-letter="o" style="display:none;">
        <div id="worksheet-container-o" aria-label="Worksheet huruf o" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-o" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/o-image.png" alt="Gambar untuk huruf o" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/o-judul.png" alt="Huruf O" style="width: 200px; height: auto;" />
                    <div id="writing-steps-o" aria-live="polite">
                        Langkah menulis huruf o:<br>
                        1. Buat lingkaran kecil dari kiri ke kanan<br>hingga kembali ke titik awal.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-o" aria-label="Soal tracing huruf o"></div>
            <div id="message-o" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-p" class="worksheet-slide" data-letter="p" style="display:none;">
        <div id="worksheet-container-p" aria-label="Worksheet huruf p" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-p" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/p-image.png" alt="Gambar untuk huruf p" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/p-judul.png" alt="Huruf P" style="width: 200px; height: auto;" />
                    <div id="writing-steps-p" aria-live="polite">
                        Langkah menulis huruf p:<br>
                        1. Tarik garis lurus ke bawah di sebelah kiri.<br>
                        2. Tambahkan setengah lingkaran kecil <br> di bagian atas sisi kanan garis.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-p" aria-label="Soal tracing huruf p"></div>
            <div id="message-p" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-q" class="worksheet-slide" data-letter="q" style="display:none;">
        <div id="worksheet-container-q" aria-label="Worksheet huruf q" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-q" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/q-image.png" alt="Gambar untuk huruf q" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/q-judul.png" alt="Huruf Q" style="width: 200px; height: auto;" />
                    <div id="writing-steps-q" aria-live="polite">
                        Langkah menulis huruf q:<br>
                        1. Buat lingkaran kecil (seperti o).<br>
                        2. Tambahkan garis pendek ke bawah di sisi kanan<br> lalu kait kecil ke kanan bawah.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-q" aria-label="Soal tracing huruf q"></div>
            <div id="message-q" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-r" class="worksheet-slide" data-letter="r" style="display:none;">
        <div id="worksheet-container-r" aria-label="Worksheet huruf r" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-r" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/r-image.png" alt="Gambar untuk huruf r" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/r-judul.png" alt="Huruf R" style="width: 200px; height: auto;" />
                    <div id="writing-steps-r" aria-live="polite">
                        Langkah menulis huruf r:<br>
                        1. Buat garis vertikal pendek.<br>
                        2. Tambahkan lengkungan kecil di atas ke kanan.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-r" aria-label="Soal tracing huruf r"></div>
            <div id="message-r" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-s" class="worksheet-slide" data-letter="s" style="display:none;">
        <div id="worksheet-container-s" aria-label="Worksheet huruf s" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-s" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/s-image.png" alt="Gambar untuk huruf s" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/s-judul.png" alt="Huruf S" style="width: 200px; height: auto;" />
                    <div id="writing-steps-s" aria-live="polite">
                        Langkah menulis huruf s:<br>
                        1. Buat lengkungan kecil ke kanan dari atas ke tengah.<br>
                        2. Lanjutkan lengkungan ke kiri bawah membentuk s kecil.<br>
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-s" aria-label="Soal tracing huruf s"></div>
            <div id="message-s" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-t" class="worksheet-slide" data-letter="t" style="display:none;">
        <div id="worksheet-container-t" aria-label="Worksheet huruf t" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-t" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/t-image.png" alt="Gambar untuk huruf t" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/t-judul.png" alt="Huruf T" style="width: 200px; height: auto;" />
                    <div id="writing-steps-t" aria-live="polite">
                        Langkah menulis huruf t:<br>
                        1. Tarik garis lurus ke bawah (lebih pendek dari l).<br>
                        2. Tambahkan garis kecil mendatar di tengah sebagai palang.
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-t" aria-label="Soal tracing huruf t"></div>
            <div id="message-t" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-u" class="worksheet-slide" data-letter="u" style="display:none;">
        <div id="worksheet-container-u" aria-label="Worksheet huruf u" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-u" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/u-image.png" alt="Gambar untuk huruf u" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/u-judul.png" alt="Huruf U" style="width: 200px; height: auto;" />
                    <div id="writing-steps-u" aria-live="polite">
                        Langkah menulis huruf u:<br>
                        1. Buat lengkungan dari kiri ke kanan ke atas (seperti mangkuk).<br>
                        2. Naikkan garis di kanan sedikit.
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-u" aria-label="Soal tracing huruf u"></div>
            <div id="message-u" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-v" class="worksheet-slide" data-letter="v" style="display:none;">
        <div id="worksheet-container-v" aria-label="Worksheet huruf v" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-v" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/v-image.png" alt="Gambar untuk huruf v" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/v-judul.png" alt="Huruf V" style="width: 200px; height: auto;" />
                    <div id="writing-steps-v" aria-live="polite">
                        Langkah menulis huruf v:<br>
                        1. Tarik garis miring ke kanan bawah.<br>
                        2. Lanjutkan garis miring ke kanan atas (membentuk V kecil).
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-v" aria-label="Soal tracing huruf v"></div>
            <div id="message-v" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-w" class="worksheet-slide" data-letter="w" style="display:none;">
        <div id="worksheet-container-w" aria-label="Worksheet huruf w" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-w" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/w-image.png" alt="Gambar untuk huruf w" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/w-judul.png" alt="Huruf W" style="width: 200px; height: auto;" />
                    <div id="writing-steps-w" aria-live="polite">
                        Langkah menulis huruf w:<br>
                        1. Buat dua bentuk v kecil yang saling berdampingan.
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-w" aria-label="Soal tracing huruf w"></div>
            <div id="message-w" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-x" class="worksheet-slide" data-letter="x" style="display:none;">
        <div id="worksheet-container-x" aria-label="Worksheet huruf x" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-x" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/x-image.png" alt="Gambar untuk huruf x" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/x-judul.png" alt="Huruf X" style="width: 200px; height: auto;" />
                    <div id="writing-steps-x" aria-live="polite">
                        Langkah menulis huruf x:<br>
                        1. Tarik garis miring dari kiri atas ke kanan bawah.<br>
                        2. Tambahkan garis miring dari kanan atas ke kiri bawah.
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-x" aria-label="Soal tracing huruf x"></div>
            <div id="message-x" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-y" class="worksheet-slide" data-letter="y" style="display:none;">
        <div id="worksheet-container-y" aria-label="Worksheet huruf y" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-y" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/y-image.png" alt="Gambar untuk huruf y" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/y-judul.png" alt="Huruf Y" style="width: 200px; height: auto;" />
                    <div id="writing-steps-y" aria-live="polite">
                        Langkah menulis huruf y:<br>
                        1. Buat bentuk v kecil.<br>
                        2. Tambahkan garis turun ke bawah di sisi kanan.
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-y" aria-label="Soal tracing huruf y"></div>
            <div id="message-y" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <div id="slide-z" class="worksheet-slide" data-letter="z" style="display:none;">
        <div id="worksheet-container-z" aria-label="Worksheet huruf z" style="width:794px;height:1123px;margin:0 auto;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);">
            <div id="image-letter-container-z" style="display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:15px;flex-wrap:wrap;">
                <div class="chicken" aria-label="Gambar hewan" role="img">
                    <img src="/elearn/calistung/assets/alfabet/z-image.png" alt="Gambar untuk huruf z" style="width: 350px; height: auto;" />
                </div>
                <div>
                    <img src="/elearn/calistung/assets/alfabet/z-judul.png" alt="Huruf Z" style="width: 200px; height: auto;" />
                    <div id="writing-steps-z" aria-live="polite">
                        Langkah menulis huruf z:<br>
                        1. Tarik garis datar ke kanan.<br>
                        2. Tarik garis miring turun ke kiri.<br>
                        3. Tarik garis datar ke kanan lagi di bawah.
                    </div>
                </div>
            </div>
            <div class="trace-grid" id="trace-grid-z" aria-label="Soal tracing huruf z"></div>
            <div id="message-z" role="alert" aria-live="assertive"></div>
        </div>
    </div>

    <script>
    (function(){
        const select = document.getElementById('worksheet-select');
        const slideA = document.getElementById('slide-a');
        const slideB = document.getElementById('slide-b');
        const slideC = document.getElementById('slide-c');
        const slideD = document.getElementById('slide-d');
        const slideE = document.getElementById('slide-e');
        const slideF = document.getElementById('slide-f');
        const slideG = document.getElementById('slide-g');
        const slideH = document.getElementById('slide-h');
        const slideI = document.getElementById('slide-i');
        const slideJ = document.getElementById('slide-j');
        const slideK = document.getElementById('slide-k');
        const slideL = document.getElementById('slide-l');
        const slideM = document.getElementById('slide-m');
        const slideN = document.getElementById('slide-n');
        const slideO = document.getElementById('slide-o');
        const slideP = document.getElementById('slide-p');
        const slideQ = document.getElementById('slide-q');
        const slideR = document.getElementById('slide-r');
        const slideS = document.getElementById('slide-s');
        const slideT = document.getElementById('slide-t');
        const slideU = document.getElementById('slide-u');
        const slideV = document.getElementById('slide-v');
        const slideW = document.getElementById('slide-w');
        const slideX = document.getElementById('slide-x');
        const slideY = document.getElementById('slide-y');
        const slideZ = document.getElementById('slide-z');
        const comingNote = document.getElementById('coming-soon-note');

        // === Tool state ===
        const btnBrush = document.getElementById('btnBrush');
        const btnEraser = document.getElementById('btnEraser');
        let currentTool = 'brush';
        const brushSize = 10;   // default brush size
        const eraserSize = 20;  // eraser a bit bigger for convenience

        function setTool(tool){
          currentTool = tool;
          if(btnBrush && btnEraser){
            const isBrush = tool === 'brush';
            btnBrush.setAttribute('aria-pressed', isBrush ? 'true' : 'false');
            btnEraser.setAttribute('aria-pressed', isBrush ? 'false' : 'true');
          }
        }
        btnBrush?.addEventListener('click', ()=> setTool('brush'));
        btnEraser?.addEventListener('click', ()=> setTool('eraser'));
        // === End tool state ===

        function buildTracing(gridEl, messageEl, letter) {
            gridEl.innerHTML = '';
            const totalCells = 15; // 3x5
            const upper = letter.toUpperCase();
            const lower = letter.toLowerCase();
            const letters = [upper,upper,upper,lower,lower,lower,upper,upper,upper,lower,lower,lower,upper,upper,upper];
            const stepsAll = [1,2,3,1,2,3,1,2,3,1,2,3,1,2,3];

            const canvases = [];
            const isDrawing = new Array(totalCells).fill(false);
            const paths = new Array(totalCells).fill(null).map(() => []);
            // Per-cell rainbow pen hue (start random so each cell feels unique)
            const penHue = new Array(totalCells).fill(0).map(() => Math.floor(Math.random()*360));

            for(let i=0;i<totalCells;i++){
                const div = document.createElement('div');
                div.classList.add('trace-letter','outlined');
                div.setAttribute('tabindex','0');
                div.setAttribute('role','button');
                div.setAttribute('aria-pressed','false');
                div.setAttribute('aria-label', `Huruf ${letters[i]}, langkah ${stepsAll[i]}`);
                div.dataset.index = i;
                div.dataset.step = stepsAll[i];
                div.dataset.letter = letters[i];

                // --- Create background canvas before drawing canvas ---
                const bgCanvas = document.createElement('canvas');
                bgCanvas.className = 'trace-canvas';
                bgCanvas.width = 150; bgCanvas.height = 150;
                bgCanvas.style.width = '100%';
                bgCanvas.style.height = '100%';
                bgCanvas.style.touchAction = 'none';
                bgCanvas.style.position = 'absolute';
                bgCanvas.style.zIndex = '1';

                const canvas = document.createElement('canvas');
                canvas.className = 'trace-canvas';
                canvas.width = 150; canvas.height = 150;
                canvas.style.width = '100%';
                canvas.style.height = '100%';
                canvas.style.touchAction = 'none';
                canvas.style.position = 'absolute';
                canvas.style.zIndex = '2';
                const ctx = canvas.getContext('2d');
                const bgCtx = bgCanvas.getContext('2d');

                // background guideline image per letter
                const img = new Image();
                img.src = `/elearn/calistung/assets/alfabet/${letter}.png`;
                img.onload = () => {
                    bgCtx.clearRect(0,0,bgCanvas.width,bgCanvas.height);
                    bgCtx.globalAlpha = 0.5;
                    bgCtx.drawImage(img,0,0,bgCanvas.width,bgCanvas.height);
                    bgCtx.globalAlpha = 1.0;
                };

                const stepSpan = document.createElement('span');
                stepSpan.className = 'step-number';
                stepSpan.textContent = stepsAll[i];
                div.appendChild(stepSpan);
                div.appendChild(bgCanvas);
                div.appendChild(canvas);

                canvases.push({canvas, ctx});
                let lastX=0,lastY=0;

                function getPointerPos(evt){
                    const rect = canvas.getBoundingClientRect();
                    const scaleX = canvas.width / rect.width;
                    const scaleY = canvas.height / rect.height;
                    let clientX, clientY;
                    if(evt.touches && evt.touches.length>0){
                        clientX = evt.touches[0].clientX;
                        clientY = evt.touches[0].clientY;
                    } else {
                        clientX = evt.clientX;
                        clientY = evt.clientY;
                    }
                    return { x: (clientX-rect.left)*scaleX, y: (clientY-rect.top)*scaleY };
                }
                function startDrawing(evt){
                    evt.preventDefault();
                    isDrawing[i]=true;
                    // Tiny hue nudge so first stroke is colorful
                    penHue[i] = (penHue[i] + 5) % 360;
                    const pos = getPointerPos(evt);
                    lastX = pos.x; lastY = pos.y;
                    paths[i].push([{x:lastX,y:lastY}]);
                }
                function draw(evt){
                    if(!isDrawing[i]) return; evt.preventDefault();
                    const pos = getPointerPos(evt);
                    const path = paths[i][paths[i].length-1];
                    path.push({x:pos.x,y:pos.y});
                    const ctx = canvases[i].ctx;
                    // Tool-aware drawing
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';

                    if (currentTool === 'eraser') {
                      // ERASER: punch holes in the drawing layer only
                      ctx.globalCompositeOperation = 'destination-out';
                      ctx.shadowBlur = 0;
                      ctx.strokeStyle = 'rgba(0,0,0,1)';
                      ctx.lineWidth = eraserSize;
                    } else {
                      // BRUSH: rainbow pen with glitter
                      ctx.globalCompositeOperation = 'source-over';
                      penHue[i] = (penHue[i] + 2) % 360;
                      const color = `hsl(${penHue[i]}, 95%, 55%)`;
                      ctx.strokeStyle = color;
                      ctx.lineWidth = brushSize;

                      // --- Glitter effect (only for brush) ---
                      for (let g = 0; g < 3; g++) {
                        const angle = Math.random() * 2 * Math.PI;
                        const radius = Math.random() * 10;
                        const gx = pos.x + Math.cos(angle) * radius;
                        const gy = pos.y + Math.sin(angle) * radius;
                        const glitterColor = '#fff';
                        ctx.save();
                        ctx.beginPath();
                        ctx.arc(gx, gy, 1 + Math.random(), 0, 2 * Math.PI);
                        ctx.fillStyle = glitterColor;
                        ctx.shadowColor = glitterColor;
                        ctx.shadowBlur = 8;
                        ctx.globalAlpha = 0.8 + Math.random() * 0.2;
                        ctx.fill();
                        ctx.globalAlpha = 1.0;
                        ctx.restore();
                      }
                      // Soft glow on the stroke
                      ctx.shadowColor = color;
                      ctx.shadowBlur = 6;
                    }

                    ctx.beginPath();
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(pos.x, pos.y);
                    ctx.stroke();
                    lastX = pos.x; lastY = pos.y;
                }
                function stopDrawing(evt){
                    if(!isDrawing[i]) return; evt.preventDefault();
                    isDrawing[i]=false;
                    // Remove the glow when not drawing
                    const ctx = canvases[i].ctx;
                    ctx.shadowBlur = 0;
                    ctx.globalCompositeOperation = 'source-over';
                }

                canvas.addEventListener('mousedown', startDrawing);
                canvas.addEventListener('mousemove', draw);
                canvas.addEventListener('mouseup', stopDrawing);
                canvas.addEventListener('mouseleave', stopDrawing);
                canvas.addEventListener('touchstart', startDrawing, {passive:false});
                canvas.addEventListener('touchmove', draw, {passive:false});
                canvas.addEventListener('touchend', stopDrawing);
                canvas.addEventListener('touchcancel', stopDrawing);

                gridEl.appendChild(div);
            }
            if(messageEl){ messageEl.textContent=''; }
        }

        // Initialize A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P
        buildTracing(document.getElementById('trace-grid-a'), document.getElementById('message-a'), 'a');
        buildTracing(document.getElementById('trace-grid-b'), document.getElementById('message-b'), 'b');
        buildTracing(document.getElementById('trace-grid-c'), document.getElementById('message-c'), 'c');
        buildTracing(document.getElementById('trace-grid-d'), document.getElementById('message-d'), 'd');
        buildTracing(document.getElementById('trace-grid-e'), document.getElementById('message-e'), 'e');
        buildTracing(document.getElementById('trace-grid-f'), document.getElementById('message-f'), 'f');
        buildTracing(document.getElementById('trace-grid-g'), document.getElementById('message-g'), 'g');
        buildTracing(document.getElementById('trace-grid-h'), document.getElementById('message-h'), 'h');
        buildTracing(document.getElementById('trace-grid-i'), document.getElementById('message-i'), 'i');
        buildTracing(document.getElementById('trace-grid-j'), document.getElementById('message-j'), 'j');
        buildTracing(document.getElementById('trace-grid-k'), document.getElementById('message-k'), 'k');
        buildTracing(document.getElementById('trace-grid-l'), document.getElementById('message-l'), 'l');
        buildTracing(document.getElementById('trace-grid-m'), document.getElementById('message-m'), 'm');
        buildTracing(document.getElementById('trace-grid-n'), document.getElementById('message-n'), 'n');
        buildTracing(document.getElementById('trace-grid-o'), document.getElementById('message-o'), 'o');
        buildTracing(document.getElementById('trace-grid-p'), document.getElementById('message-p'), 'p');
        buildTracing(document.getElementById('trace-grid-q'), document.getElementById('message-q'), 'q');
        buildTracing(document.getElementById('trace-grid-r'), document.getElementById('message-r'), 'r');
        buildTracing(document.getElementById('trace-grid-s'), document.getElementById('message-s'), 's');
        buildTracing(document.getElementById('trace-grid-t'), document.getElementById('message-t'), 't');
        buildTracing(document.getElementById('trace-grid-u'), document.getElementById('message-u'), 'u');
        buildTracing(document.getElementById('trace-grid-v'), document.getElementById('message-v'), 'v');
        buildTracing(document.getElementById('trace-grid-w'), document.getElementById('message-w'), 'w');
        buildTracing(document.getElementById('trace-grid-x'), document.getElementById('message-x'), 'x');
        buildTracing(document.getElementById('trace-grid-y'), document.getElementById('message-y'), 'y');
        buildTracing(document.getElementById('trace-grid-z'), document.getElementById('message-z'), 'z');

        function setSlide(letter){
            const isAvailable = (
                letter==='a'||letter==='b'||letter==='c'||letter==='d'||letter==='e'||letter==='f'||letter==='g'||letter==='h'||letter==='i'||letter==='j'||letter==='k'||letter==='l'||letter==='m'||letter==='n'||letter==='o'||letter==='p'||letter==='q'||letter==='r'||letter==='s'||letter==='t'||letter==='u'||letter==='v'||letter==='w'||letter==='x'||letter==='y'||letter==='z'
            );
            comingNote.style.display = isAvailable ? 'none' : 'inline';
            slideA.style.display = (letter==='a') ? 'block' : 'none';
            slideB.style.display = (letter==='b') ? 'block' : 'none';
            slideC.style.display = (letter==='c') ? 'block' : 'none';
            slideD.style.display = (letter==='d') ? 'block' : 'none';
            slideE.style.display = (letter==='e') ? 'block' : 'none';
            slideF.style.display = (letter==='f') ? 'block' : 'none';
            slideG.style.display = (letter==='g') ? 'block' : 'none';
            slideH.style.display = (letter==='h') ? 'block' : 'none';
            slideI.style.display = (letter==='i') ? 'block' : 'none';
            slideJ.style.display = (letter==='j') ? 'block' : 'none';
            slideK.style.display = (letter==='k') ? 'block' : 'none';
            slideL.style.display = (letter==='l') ? 'block' : 'none';
            slideM.style.display = (letter==='m') ? 'block' : 'none';
            slideN.style.display = (letter==='n') ? 'block' : 'none';
            slideO.style.display = (letter==='o') ? 'block' : 'none';
            slideP.style.display = (letter==='p') ? 'block' : 'none';
            slideQ.style.display = (letter==='q') ? 'block' : 'none';
            slideR.style.display = (letter==='r') ? 'block' : 'none';
            slideS.style.display = (letter==='s') ? 'block' : 'none';
            slideT.style.display = (letter==='t') ? 'block' : 'none';
            slideU.style.display = (letter==='u') ? 'block' : 'none';
            slideV.style.display = (letter==='v') ? 'block' : 'none';
            slideW.style.display = (letter==='w') ? 'block' : 'none';
            slideX.style.display = (letter==='x') ? 'block' : 'none';
            slideY.style.display = (letter==='y') ? 'block' : 'none';
            slideZ.style.display = (letter==='z') ? 'block' : 'none';
        }

        // Initial state
        setSlide('a');

        select.addEventListener('change', (e)=>{
            const val = (e.target.value||'a').toLowerCase();
            setSlide(val);
        });
    })();
    </script>
</div>

<style>
  .finish-bar { position: fixed; right: 16px; bottom: 16px; z-index: 1000; }
  #btnSelesai { background: #22c55e; color: #fff; border: none; cursor: pointer; padding: 12px 16px; border-radius: 12px; font-weight: 700; font-size: 16px; box-shadow: 0 6px 18px rgba(16, 185, 129, 0.4); }
  #btnSelesai:hover { filter: brightness(1.05); }
  #btnSelesai:active { transform: translateY(1px); }
  @media (max-width: 480px) {
    #btnSelesai { padding: 10px 14px; font-size: 15px; }
  }
</style>

<div class="finish-bar"><button id="btnSelesai" type="button">Selesai</button></div>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="/elearn/manifest-lessons.js"></script>
<script src="/elearn/userInfo.js"></script>
<script src="/elearn/common/worksheet-submit.js"></script>
<script>
  // Debug log
  window.WORKSHEET_DEBUG = true;
  window.WORKSHEET_META = { course_id: "numbers-basic" };

  // Ambil info user dari localStorage via userInfo.js
  const info = (typeof getUserInfo === 'function') ? getUserInfo() : {};
  const role = (info.role || '').toLowerCase();

  initWorksheetSubmit({
    muridUid: info.uid || '',
    cid: info.cid || '',
    namaAnak: info.nama || '',
    role: role
  });
</script>
</body>
</html>
