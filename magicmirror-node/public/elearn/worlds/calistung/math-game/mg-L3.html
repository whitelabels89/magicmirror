<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MG-L3 â€¢ Mewarnai Penjumlahan (6â€“10)</title>
  <style>
    :root{
      --c10:#e4573d; /* merah */
      --c9:#54b3c8;  /* biru muda */
      --c8:#49a364; /* hijau */
      --c7:#f0cc33; /* kuning */
      --c6:#4b57b7; /* biru tua */
      --ink:#1b1f23;
      --muted:#7a7f87;
      --bg:#fff;
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}
    header{padding:18px 16px 6px}
    h1{margin:0 0 4px;font-size:20px}
    p.sub{margin:0;color:var(--muted);font-size:14px}

    .board{display:grid;gap:10px;justify-content:center;padding:18px}
    /* 5 baris, dengan offset kiri agar terlihat seperti sarang lebah */
    .row{display:flex;gap:10px;}
    .row.r1{margin-left:110px}
    .row.r2{margin-left:55px}
    .row.r3{margin-left:0}
    .row.r4{margin-left:55px}
    .row.r5{margin-left:110px}

    .hex{
      width:110px;height:95px;position:relative;cursor:pointer;
      clip-path:polygon(25% 6%,75% 6%,100% 50%,75% 94%,25% 94%,0 50%);
      background:#f6f7f9;border:2px solid #d5dae1;border-radius:8px;transition:transform .05s ease-in-out, box-shadow .2s;
      display:flex;align-items:center;justify-content:center;
    }
    .hex:hover{box-shadow:0 4px 14px rgba(0,0,0,.08)}
    .hex.correct{outline:3px solid #27ae60}
    .hex.wrong{outline:3px solid #e74c3c}

    .expr{font-weight:700;font-size:22px;letter-spacing:.5px}

    .tools{display:flex;justify-content:center;gap:14px;flex-wrap:wrap;padding:10px 16px 24px}
    .swatch{
      width:78px;height:68px;clip-path:polygon(25% 6%,75% 6%,100% 50%,75% 94%,25% 94%,0 50%);
      border-radius:8px;border:2px solid rgba(0,0,0,.12);display:flex;align-items:center;justify-content:center;cursor:pointer;
      transition:transform .05s ease-in-out;user-select:none;
      color:#111;font-weight:800;font-size:22px
    }
    .swatch:active{transform:scale(.98)}
    .swatch[data-val="10"]{background:var(--c10)}
    .swatch[data-val="9"]{background:var(--c9)}
    .swatch[data-val="8"]{background:var(--c8)}
    .swatch[data-val="7"]{background:var(--c7)}
    .swatch[data-val="6"]{background:var(--c6);color:#fff}

    .panel{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;padding:0 16px 24px}
    .btn{padding:10px 14px;border:0;border-radius:10px;font-weight:700;background:#111;color:#fff;cursor:pointer}
    .btn.secondary{background:#e8eaee;color:#111}
    .badge{padding:8px 10px;border-radius:999px;background:#f3f4f7;color:#333;font-size:12px}
    .active{outline:4px solid #111}

    footer{padding:0 16px 28px;text-align:center;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <header>
    <h1>Mewarnai Penjumlahan</h1>
    <p class="sub">Warnai sarang lebah sesuai <b>jumlah</b>nya. Pilih warna (angka 6â€“10), lalu klik heksagon.</p>
  </header>

  <!-- BOARD -->
  <section class="board" id="board">
    <div class="row r1">
      <!-- 2 -->
      <div class="hex" data-sum="10"><span class="expr">7+3</span></div>
      <div class="hex" data-sum="9"><span class="expr">2+7</span></div>
    </div>
    <div class="row r2">
      <!-- 3 -->
      <div class="hex" data-sum="7"><span class="expr">4+3</span></div>
      <div class="hex" data-sum="6"><span class="expr">3+3</span></div>
      <div class="hex" data-sum="8"><span class="expr">5+3</span></div>
    </div>
    <div class="row r3">
      <!-- 4 -->
      <div class="hex" data-sum="10"><span class="expr">2+8</span></div>
      <div class="hex" data-sum="7"><span class="expr">5+2</span></div>
      <div class="hex" data-sum="8"><span class="expr">4+4</span></div>
      <div class="hex" data-sum="6"><span class="expr">5+1</span></div>
    </div>
    <div class="row r4">
      <!-- 3 -->
      <div class="hex" data-sum="6"><span class="expr">4+2</span></div>
      <div class="hex" data-sum="8"><span class="expr">6+2</span></div>
      <div class="hex" data-sum="9"><span class="expr">4+5</span></div>
    </div>
    <div class="row r5">
      <!-- 2 -->
      <div class="hex" data-sum="9"><span class="expr">3+6</span></div>
      <div class="hex" data-sum="10"><span class="expr">5+5</span></div>
    </div>
  </section>

  <!-- COLOR PALETTE -->
  <section class="tools" id="palette" aria-label="Palet Warna (6â€“10)">
    <div class="swatch" data-val="10" title="10">10</div>
    <div class="swatch" data-val="9" title="9">9</div>
    <div class="swatch" data-val="8" title="8">8</div>
    <div class="swatch" data-val="7" title="7">7</div>
    <div class="swatch" data-val="6" title="6">6</div>
  </section>

  <section class="panel">
    <button class="btn" id="btnCheck">Periksa Jawaban</button>
    <button class="btn secondary" id="btnShuffle">Acak Soal</button>
    <span class="badge" id="status">Pilih warna dulu âžœ klik heksagon</span>
  </section>

  <footer>
    Tip: warna benar tidak harus penuh rapiâ€”yang penting <b>angka</b> cocok ðŸ˜‰
  </footer>

  <script>
    const palette = document.getElementById('palette');
    const board   = document.getElementById('board');
    const status  = document.getElementById('status');
    const btnCheck = document.getElementById('btnCheck');
    const btnShuffle = document.getElementById('btnShuffle');

    const colorMap = {
      10: getComputedStyle(document.documentElement).getPropertyValue('--c10').trim(),
       9: getComputedStyle(document.documentElement).getPropertyValue('--c9').trim(),
       8: getComputedStyle(document.documentElement).getPropertyValue('--c8').trim(),
       7: getComputedStyle(document.documentElement).getPropertyValue('--c7').trim(),
       6: getComputedStyle(document.documentElement).getPropertyValue('--c6').trim(),
    };

    let current = null; // 6..10

    // Select swatch
    palette.addEventListener('click', (e)=>{
      const el = e.target.closest('.swatch');
      if(!el) return;
      current = Number(el.dataset.val);
      [...palette.children].forEach(s=>s.classList.remove('active'));
      el.classList.add('active');
      status.textContent = `Warna aktif: ${current}. Klik heksagon untuk mewarnai.`;
    });

    // Paint a hex
    board.addEventListener('click', (e)=>{
      const hex = e.target.closest('.hex');
      if(!hex) return;
      if(!current){
        status.textContent = 'Pilih warna dulu ya!';
        return;
      }
      hex.style.background = colorMap[current];
      hex.dataset.paint = String(current);
      hex.classList.remove('correct','wrong');
    });

    // Check answers
    btnCheck.addEventListener('click', ()=>{
      const cells = [...document.querySelectorAll('.hex')];
      let ok=0;
      cells.forEach(h=>{
        const need = Number(h.dataset.sum);
        const paint = Number(h.dataset.paint||0);
        h.classList.remove('correct','wrong');
        if(!paint){return}
        if(paint===need){ h.classList.add('correct'); ok++; }
        else{ h.classList.add('wrong'); }
      });
      status.textContent = `Benar: ${ok}/${cells.length}. Heksagon hijau sudah tepat!`;
    });

    // Shuffle problems (tetap di rentang 6â€“10)
    btnShuffle.addEventListener('click', ()=>{
      const rng = (a,b)=> Math.floor(Math.random()*(b-a+1))+a;
      const cells = [...document.querySelectorAll('.hex')];
      cells.forEach(h=>{
        const target = rng(6,10);
        // cari pasangan a+b=target (a,b 1..9)
        const a = rng(1,target-1);
        const b = target - a;
        h.dataset.sum = target;
        h.querySelector('.expr').textContent = `${a}+${b}`;
        // reset tampilan
        h.style.background = '#f6f7f9';
        h.classList.remove('correct','wrong');
        delete h.dataset.paint;
      });
      // auto-clear selection feedback
      status.textContent = 'Soal diacak! Pilih warna lagi dan lanjutkan.';
    });
  </script>
    <button id="finishBtn-L3" style="margin-top: 20px; padding: 10px; background-color: green; color: white;">Selesai</button>
<script>
document.getElementById("finishBtn-L3").addEventListener("click", function() {
  alert("Level selesai!");
  fetch("/elearn/worlds/calistung/math-game/config.json")
    .then(() => console.log("progress saved"));
  window.location.href = "/elearn/worlds/calistung/math-game/index.html";
});
</script>
</body>
</html>
