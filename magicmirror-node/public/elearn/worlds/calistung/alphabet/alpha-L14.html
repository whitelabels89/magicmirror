

<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alpha14L5 â€“ Menulis Suku Kata KV (ba bi bu be bo)</title>
  <style>
    :root{
      --gap: 14px;
      --radius: 14px;
      --font: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:20px; font-family:var(--font); background:#fafafa; color:#222;
    }
    .sheet{
      max-width:960px; margin:0 auto; background:#fff; border:3px solid #00000015; border-radius:16px; box-shadow:0 10px 30px #00000010; padding:24px; position:relative;
    }

    h1{margin:12px 0 18px; text-align:center; font-size:28px}
    .toolbar{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-bottom:14px}
    .btn{border:2px solid #00000025; background:#f4f4f4; border-radius:12px; padding:10px 14px; cursor:pointer; font-weight:700}
    .btn:active{transform:translateY(1px)}

    .headers{
      display:grid; grid-template-columns: repeat(5, 1fr); gap:var(--gap); margin:8px 0 18px;
    }
    .syllable{
      user-select:none; text-align:center; font-weight:900; font-size:28px; padding:12px 6px; border-radius:16px; border:3px solid #00000020; cursor:pointer; transition:box-shadow .15s, transform .1s, border .15s;
    }
    .syllable.active{outline:4px solid #00000020; box-shadow:0 6px 14px #0000001a}
    .s-ba{background:#ffd8c2}
    .s-bi{background:#ffefb9}
    .s-bu{background:#c7e9b5}
    .s-be{background:#cfe1ff}
    .s-bo{background:#cfc5ff}

    .grid{display:grid; grid-template-columns:repeat(5, 1fr); gap:var(--gap)}
    .cell{
      display:flex; align-items:center; justify-content:center; height:82px; border-radius:14px; border:3px solid #00000030; background:#fff; font-size:28px; font-weight:800; text-transform:lowercase; cursor:pointer; position:relative;
    }
    .cell[data-correct="true"]{border-color:#21bf73; box-shadow:inset 0 0 0 3px #21bf7360}
    .cell[data-correct="false"]{border-color:#ff4d4f; box-shadow:inset 0 0 0 3px #ff4d4f60}

    .legend{margin:10px 0 0; text-align:center; font-size:14px; color:#666}

    .sticky-actions{position:sticky; bottom:8px; display:flex; justify-content:center; gap:10px; margin-top:16px}

    @media (max-width:720px){
      body{padding:14px}
      h1{font-size:22px}
      .cell{height:66px; font-size:24px}
      .syllable{font-size:24px; padding:10px}
    }
  </style>
</head>
<body>
  <div class="sheet" id="app">
    <h1>menulis suku kata</h1>

    <!-- HEADER SYLLABLES (click to select brush) -->
    <div class="headers" id="headers"></div>

    <!-- 4 x 5 grid cells -->
    <div class="grid" id="grid"></div>

    <div class="legend">Pilih salah satu suku kata berwarna di atas, lalu ketuk kotak untuk mengisi. Tujuan: setiap kolom diisi sama dengan suku kata header-nya (Shortcut: tekan angka 1â€“5 di keyboard untuk memilih header cepat).</div>

    <div class="sticky-actions">
      <button class="btn" id="btnCheck">Periksa Jawaban</button>
      <button class="btn" id="btnReset">Reset</button>
      <button class="btn" id="btnShuffle">Acak Urutan Kolom</button>
    </div>
  </div>

  <script>
    ;(() => {
      const app = document.getElementById('app');
      const headersEl = document.getElementById('headers');
      const gridEl = document.getElementById('grid');
      const btnCheck = document.getElementById('btnCheck');
      const btnReset = document.getElementById('btnReset');
      const btnShuffle = document.getElementById('btnShuffle');

      // base syllables
      const base = ['ba','bi','bu','be','bo'];
      let order = [...base];
      let active = null; // current brush

      function drawHeaders(){
        headersEl.innerHTML = '';
        order.forEach((syl, idx) => {
          const div = document.createElement('div');
          div.className = `syllable s-${syl}`;
          div.textContent = syl;
          div.dataset.syl = syl;
          div.title = 'Klik untuk memilih';
          div.addEventListener('click', () => setActive(div));
          headersEl.appendChild(div);
        });
        // default select first
        setActive(headersEl.firstElementChild);
      }

      function setActive(el){
        [...headersEl.children].forEach(x => x.classList.remove('active'));
        el.classList.add('active');
        active = el.dataset.syl;
      }

      function drawGrid(){
        gridEl.innerHTML = '';
        // 4 rows x 5 columns
        const rows = 4, cols = 5;
        for(let r=0;r<rows;r++){
          for(let c=0;c<cols;c++){
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.contentEditable = false; // we fill by click, not typing (biar konsisten)
            cell.dataset.col = c;
            cell.addEventListener('click', () => fillCell(cell));
            gridEl.appendChild(cell);
          }
        }
      }

      function fillCell(cell){
        if(!active) return;
        cell.textContent = active;
        cell.removeAttribute('data-correct');
      }

      function resetAll(){
        [...gridEl.children].forEach(c => { c.textContent = ''; c.removeAttribute('data-correct'); });
      }

      function shuffleOrder(){
        // Fisher-Yates
        for(let i=order.length-1;i>0;i--){
          const j = Math.floor(Math.random()*(i+1));
          [order[i], order[j]] = [order[j], order[i]];
        }
        drawHeaders();
        resetAll();
      }

      function check(){
        // each column must equal its header syllable
        let total = 0, correct = 0;
        const cols = 5, rows = 4;
        for(let c=0;c<cols;c++){
          const target = order[c];
          for(let r=0;r<rows;r++){
            const idx = r*cols + c;
            const cell = gridEl.children[idx];
            const val = (cell.textContent || '').trim().toLowerCase();
            const ok = val === target;
            cell.dataset.correct = ok;
            total++;
            if(ok) correct++;
          }
        }
        toast(`Skor: ${correct}/${total}. ${(correct===total)?'Mantap! Semua benar ðŸŽ‰':'Coba rapikan lagi ðŸ˜º'}`);
      }

      function toast(msg){
        const t = document.createElement('div');
        t.textContent = msg;
        t.style.cssText = 'position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 8px 20px #0007;z-index:9999;font-weight:700;';
        document.body.appendChild(t);
        setTimeout(()=>t.remove(), 2200);
      }

      // init
      drawHeaders();
      drawGrid();

      // events
      btnReset.addEventListener('click', resetAll);
      btnShuffle.addEventListener('click', shuffleOrder);
      btnCheck.addEventListener('click', check);

      // Quality-of-life: keyboard 1..5 = choose header
      window.addEventListener('keydown', (e) => {
        const idx = parseInt(e.key,10) - 1;
        if(idx>=0 && idx<headersEl.children.length){ setActive(headersEl.children[idx]); }
      });
    })();
  </script>
<button id="btn-finish" type="button">Selesai</button>
<script src="/elearn/manifest-lessons.js"></script>
<script src="/elearn/userInfo.js"></script>
<script src="/elearn/common/worksheet-submit.js"></script>
<script>
  window.WORKSHEET_DEBUG = true;
  const info = (typeof getUserInfo === "function") ? getUserInfo() : {};
  initWorksheetSubmit({
    muridUid: info.uid || "",
    cid: info.cid || "",
    namaAnak: info.nama || "",
    role: (info.role || "").toLowerCase()
  });
</script>
</body>
</html>