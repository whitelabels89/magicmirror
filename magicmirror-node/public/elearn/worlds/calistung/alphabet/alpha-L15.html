<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Alpha15 â€¢ Tebak Huruf dari Warna</title>
  <link rel="stylesheet" href="theme.css" />
  <script defer src="theme.js"></script>
  <style>
    :root {
      --bg: #f4f2ff;
      --card: #ffffff;
      --accent: #7c3aed;
      --ink: #1f2937;
      --muted: #6b7280;
      --good: #16a34a;
      --bad: #ef4444;
      --shadow: 0 26px 60px rgba(124, 58, 237, 0.16);
    }
    *, *::before, *::after { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
      background: radial-gradient(circle at top, rgba(124, 58, 237, 0.12), transparent 60%), var(--bg);
      color: var(--ink);
      min-height: 100svh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: clamp(16px, 4vw, 40px);
    }
    main {
      width: min(1024px, 100%);
      background: var(--card);
      border-radius: 32px;
      box-shadow: var(--shadow);
      padding: clamp(22px, 4vw, 36px);
      display: grid;
      gap: clamp(18px, 4vw, 30px);
    }
    header { text-align: center; }
    h1 {
      margin: 0;
      font-size: clamp(24px, 5vw, 38px);
      font-weight: 800;
      color: var(--accent);
    }
    p.lead {
      margin: 10px auto 0;
      max-width: 600px;
      color: var(--muted);
      font-size: clamp(15px, 2.7vw, 18px);
      line-height: 1.6;
    }
    .legend {
      display: grid;
      gap: 12px;
    }
    .legend-title {
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .4px;
      color: rgba(124, 58, 237, 0.9);
      font-size: clamp(14px, 2.4vw, 16px);
    }
    .legend-grid {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(84px, 1fr));
    }
    .legend-item {
      text-align: center;
      font-weight: 700;
      color: #4b5563;
    }
    .circle {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-size: 22px;
      font-weight: 800;
      color: #111827;
      border: 4px solid rgba(17, 24, 39, 0.08);
      margin: 0 auto 6px;
    }
    .worksheet {
      display: grid;
      gap: clamp(16px, 3vw, 22px);
    }
    .question {
      display: grid;
      gap: 14px;
      padding: clamp(16px, 3.2vw, 24px);
      border-radius: 24px;
      background: linear-gradient(180deg, rgba(124, 58, 237, 0.06), rgba(124, 58, 237, 0));
      border: 1px solid rgba(124, 58, 237, 0.12);
      position: relative;
      overflow: hidden;
    }
    .question::after {
      content: '';
      position: absolute;
      inset: 0;
      pointer-events: none;
      border-radius: inherit;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.3);
    }
    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .chips .circle { width: 58px; height: 58px; font-size: 20px; }
    .answer-box {
      display: grid;
      gap: 8px;
      justify-items: center;
    }
    .answer-box input {
      width: min(220px, 80%);
      border-radius: 16px;
      border: 2px solid rgba(79, 70, 229, 0.16);
      padding: 12px 16px;
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      text-transform: lowercase;
      transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .answer-box input.correct {
      border-color: var(--good);
      background: #ecfdf3;
      box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.18);
    }
    .answer-box input.wrong {
      border-color: var(--bad);
      background: #fef2f2;
      box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.18);
    }
    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      justify-content: center;
    }
    .actions button {
      min-width: clamp(150px, 30vw, 220px);
    }
    #status {
      text-align: center;
      font-weight: 700;
      color: var(--accent);
      min-height: 24px;
    }
    #status.ok { color: var(--good); }
    #status.warn { color: var(--bad); }

    @media (max-width: 600px) {
      .circle { width: 56px; height: 56px; }
      .chips .circle { width: 50px; height: 50px; font-size: 18px; }
      .question { border-radius: 18px; }
    }
  </style>
  <style>
    .finish-bar { position: fixed; right: 16px; bottom: 16px; z-index: 1000; }
    #btnSelesai { background: #22c55e; color: #fff; border: none; cursor: pointer; padding: 12px 16px; border-radius: 12px; font-weight: 700; font-size: 16px; box-shadow: 0 6px 18px rgba(16, 185, 129, 0.4); }
    #btnSelesai:hover { filter: brightness(1.05); }
    #btnSelesai:active { transform: translateY(1px); }
    @media (max-width: 480px) {
      #btnSelesai { padding: 10px 14px; font-size: 15px; }
    }
  </style>
  <link rel="stylesheet" href="/elearn/worlds/calistung/buttons.css" />
</head>
<body class="alphabet-game">
  <main aria-live="polite">
    <header>
      <h1>Tebak Huruf dari Warna</h1>
      <p class="lead">Setiap warna mewakili huruf tertentu. Perhatikan daftar warna, lalu tuliskan kata sesuai warna pada barisan lingkaran.</p>
    </header>

    <section class="legend" aria-label="Daftar warna dan huruf">
      <div class="legend-title">Petunjuk Warna</div>
      <div class="legend-grid">
        <div class="legend-item" data-letter="b">
          <div class="circle" style="background:#f97316">B</div>
          <div>= b</div>
        </div>
        <div class="legend-item" data-letter="a">
          <div class="circle" style="background:#facc15">A</div>
          <div>= a</div>
        </div>
        <div class="legend-item" data-letter="l">
          <div class="circle" style="background:#60a5fa">L</div>
          <div>= l</div>
        </div>
        <div class="legend-item" data-letter="i">
          <div class="circle" style="background:#c084fc">I</div>
          <div>= i</div>
        </div>
        <div class="legend-item" data-letter="k">
          <div class="circle" style="background:#fda4af">K</div>
          <div>= k</div>
        </div>
        <div class="legend-item" data-letter="u">
          <div class="circle" style="background:#34d399">U</div>
          <div>= u</div>
        </div>
        <div class="legend-item" data-letter="s">
          <div class="circle" style="background:#fb7185">S</div>
          <div>= s</div>
        </div>
        <div class="legend-item" data-letter="p">
          <div class="circle" style="background:#f9a8d4">P</div>
          <div>= p</div>
        </div>
        <div class="legend-item" data-letter="n">
          <div class="circle" style="background:#f87171">N</div>
          <div>= n</div>
        </div>
        <div class="legend-item" data-letter="g">
          <div class="circle" style="background:#c4b5fd">G</div>
          <div>= g</div>
        </div>
        <div class="legend-item" data-letter="o">
          <div class="circle" style="background:#38bdf8">O</div>
          <div>= o</div>
        </div>
        <div class="legend-item" data-letter="t">
          <div class="circle" style="background:#2dd4bf">T</div>
          <div>= t</div>
        </div>
      </div>
    </section>

    <section id="worksheet" class="worksheet" aria-label="Daftar soal">
      <article class="question" data-answer="bali">
        <div class="chips" aria-label="Susunan warna untuk kata pertama">
          <div class="circle" data-letter="B" style="background:#f97316">B</div>
          <div class="circle" data-letter="A" style="background:#facc15">A</div>
          <div class="circle" data-letter="L" style="background:#60a5fa">L</div>
          <div class="circle" data-letter="I" style="background:#c084fc">I</div>
        </div>
        <div class="answer-box">
          <input type="text" autocomplete="off" spellcheck="false" aria-label="Jawaban untuk warna kata 4 huruf" />
          <small style="color:var(--muted); font-weight:600">Tulis kata di sini</small>
        </div>
      </article>
      <article class="question" data-answer="balik">
        <div class="chips" aria-label="Susunan warna untuk kata kedua">
          <div class="circle" data-letter="B" style="background:#f97316">B</div>
          <div class="circle" data-letter="A" style="background:#facc15">A</div>
          <div class="circle" data-letter="L" style="background:#60a5fa">L</div>
          <div class="circle" data-letter="I" style="background:#c084fc">I</div>
          <div class="circle" data-letter="K" style="background:#fda4af">K</div>
        </div>
        <div class="answer-box">
          <input type="text" autocomplete="off" spellcheck="false" aria-label="Jawaban untuk warna kata 5 huruf" />
          <small style="color:var(--muted); font-weight:600">Tulis kata di sini</small>
        </div>
      </article>
      <article class="question" data-answer="buku">
        <div class="chips" aria-label="Susunan warna untuk kata ketiga">
          <div class="circle" data-letter="B" style="background:#f97316">B</div>
          <div class="circle" data-letter="U" style="background:#34d399">U</div>
          <div class="circle" data-letter="K" style="background:#fda4af">K</div>
          <div class="circle" data-letter="U" style="background:#34d399">U</div>
        </div>
        <div class="answer-box">
          <input type="text" autocomplete="off" spellcheck="false" aria-label="Jawaban untuk warna kata 4 huruf" />
          <small style="color:var(--muted); font-weight:600">Tulis kata di sini</small>
        </div>
      </article>
      <article class="question" data-answer="saku">
        <div class="chips" aria-label="Susunan warna untuk kata keempat">
          <div class="circle" data-letter="S" style="background:#fb7185">S</div>
          <div class="circle" data-letter="A" style="background:#facc15">A</div>
          <div class="circle" data-letter="K" style="background:#fda4af">K</div>
          <div class="circle" data-letter="U" style="background:#34d399">U</div>
        </div>
        <div class="answer-box">
          <input type="text" autocomplete="off" spellcheck="false" aria-label="Jawaban untuk warna kata 4 huruf" />
          <small style="color:var(--muted); font-weight:600">Tulis kata di sini</small>
        </div>
      </article>
      <article class="question" data-answer="pisang">
        <div class="chips" aria-label="Susunan warna untuk kata kelima">
          <div class="circle" data-letter="P" style="background:#f9a8d4">P</div>
          <div class="circle" data-letter="I" style="background:#c084fc">I</div>
          <div class="circle" data-letter="S" style="background:#fb7185">S</div>
          <div class="circle" data-letter="A" style="background:#facc15">A</div>
          <div class="circle" data-letter="N" style="background:#f87171">N</div>
          <div class="circle" data-letter="G" style="background:#c4b5fd">G</div>
        </div>
        <div class="answer-box">
          <input type="text" autocomplete="off" spellcheck="false" aria-label="Jawaban untuk warna kata 6 huruf" />
          <small style="color:var(--muted); font-weight:600">Tulis kata di sini</small>
        </div>
      </article>
      <article class="question" data-answer="topi">
        <div class="chips" aria-label="Susunan warna untuk kata keenam">
          <div class="circle" data-letter="T" style="background:#2dd4bf">T</div>
          <div class="circle" data-letter="O" style="background:#38bdf8">O</div>
          <div class="circle" data-letter="P" style="background:#f9a8d4">P</div>
          <div class="circle" data-letter="I" style="background:#c084fc">I</div>
        </div>
        <div class="answer-box">
          <input type="text" autocomplete="off" spellcheck="false" aria-label="Jawaban untuk warna kata 4 huruf" />
          <small style="color:var(--muted); font-weight:600">Tulis kata di sini</small>
        </div>
      </article>
    </section>

    <div class="actions">
      <button type="button" id="btnCheck">Periksa Jawaban</button>
      <button type="button" id="btnReset">Reset</button>
      <button type="button" id="btnShuffle">Acak Soal</button>
    </div>
    <div id="status" role="status"></div>
  </main>

  <div class="finish-bar"><button id="btnSelesai" type="button">Selesai</button></div>

  <script>
    (function(){
      const worksheet = document.getElementById('worksheet');
      const statusEl = document.getElementById('status');
      const btnCheck = document.getElementById('btnCheck');
      const btnReset = document.getElementById('btnReset');
      const btnShuffle = document.getElementById('btnShuffle');

      const rows = Array.from(worksheet.querySelectorAll('.question'));

      rows.forEach(row => {
        const input = row.querySelector('input');
        input.addEventListener('input', () => {
          input.value = input.value.replace(/[^a-zA-Z]/g, '').toLowerCase();
          input.classList.remove('correct', 'wrong');
          row.removeAttribute('data-state');
          setStatus('','');
        });
      });

      function checkAnswers(){
        let correct = 0;
        rows.forEach(row => {
          const input = row.querySelector('input');
          const answer = (input.value || '').trim().toLowerCase();
          const expected = row.dataset.answer;
          input.classList.remove('correct', 'wrong');
          if(answer === expected){
            input.classList.add('correct');
            row.dataset.state = 'correct';
            correct++;
          } else {
            input.classList.add('wrong');
            row.dataset.state = 'wrong';
          }
        });

        if(correct === rows.length){
          setStatus(`Hebat! Semua benar (${correct}/${rows.length}).`, 'ok');
        } else {
          setStatus(`Benar ${correct} dari ${rows.length} kata. Tetap semangat ya!`, 'warn');
        }
      }

      function resetAnswers(){
        rows.forEach(row => {
          const input = row.querySelector('input');
          input.value = '';
          input.classList.remove('correct', 'wrong');
          row.removeAttribute('data-state');
        });
        setStatus('Jawaban dikosongkan.', '');
      }

      function shuffleQuestions(){
        const shuffled = [...rows].sort(() => Math.random() - 0.5);
        shuffled.forEach(row => worksheet.appendChild(row));
        resetAnswers();
        setStatus('Soal diacak ulang.', '');
      }

      function setStatus(text, state){
        statusEl.textContent = text;
        statusEl.className = '';
        if(state){
          statusEl.classList.add(state);
        }
      }

      btnCheck.addEventListener('click', checkAnswers);
      btnReset.addEventListener('click', resetAnswers);
      btnShuffle.addEventListener('click', shuffleQuestions);

      setStatus('Tulis kata sesuai warna di atas ya!', '');
    })();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="/elearn/manifest-lessons.js"></script>
  <script src="/elearn/userInfo.js"></script>
  <script src="/elearn/common/worksheet-submit.js"></script>
  <script>
    window.WORKSHEET_DEBUG = true;
    const info = (typeof getUserInfo === "function") ? getUserInfo() : {};
    initWorksheetSubmit({
      muridUid: info.uid || "",
      cid: info.cid || "",
      namaAnak: info.nama || "",
      role: (info.role || "").toLowerCase()
    });
  </script>
  <script src="/elearn/common/calistung-navbar.js"></script>
</body>
</html>
