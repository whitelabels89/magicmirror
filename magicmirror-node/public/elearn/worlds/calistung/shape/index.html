<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calistung â€” Sub World</title>
  <link rel="stylesheet" href="/elearn/worlds/styles.css">

  <link rel="stylesheet" href="/elearn/worlds/calistung/buttons.css" />
</head>
<body class="world-root" data-world-id="calistung-shape">
  <div class="hud-bar">
    <div class="hud-left">
      <a class="hud-btn" href="/elearn/worlds/calistung/index.html">âŸµ Kembali</a>
      <button class="hud-btn" data-panel="inventory">Inventory</button>
      <button class="hud-btn" data-panel="skills">Skills</button>
      <button class="hud-btn" data-panel="badges">Badges</button>
      <button class="hud-btn" data-panel="progress">Progress</button>
    </div>
    <div class="hud-right">
      <span class="hud-coins">ðŸª™ <span id="hudCoins">0</span></span>
      <img id="hudAvatar" src="/elearn/worlds/assets/default-avatar.png" class="hud-avatar" alt="Avatar">
    </div>
  </div>

  <div id="hudPanel" class="hud-panel">
    <h3 id="hudPanelTitle">Panel</h3>
    <div id="hudPanelContent"></div>
  </div>

  <div id="worldRoot"></div>

  <script>
    // Hide HUD by default for this world
    try { localStorage.setItem('hud:hidden:calistung-shape','1'); } catch(_){ }
  </script>
  <script type="module">
    import { initWorld } from '/elearn/worlds/map.js';
    import { initHud } from '/elearn/worlds/ui/hud.js';
    import '/elearn/worlds/utils/progress.js';

    // Penting: worldId unik agar progress/badge/coins tidak bercampur
    initHud({ worldId: 'calistung-shape' });

    initWorld({
      rootSelector: '#worldRoot',
      configPath: '/elearn/worlds/calistung/shape/config.json'
    });
  </script>
  <script>
    // Ensure HUD panel is closed on load (avoid auto-open flash)
    setTimeout(() => {
      try { const p = document.getElementById('hudPanel'); if (p) p.classList.remove('open'); } catch(_){ }
    }, 0);
  </script>
</body>
</html>
