<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Craft & Coding L4: Connecting Crafts with Simple Coding</title>
    
    <!-- FilePond CSS -->
    <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet">
    <link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- QR Code Generator -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Lesson Navigation */
        .lesson-nav {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .lesson-nav h3 {
            font-family: 'Fredoka One', cursive;
            color: #ff6b6b;
            margin-bottom: 10px;
            text-align: center;
        }

        .lesson-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lesson-btn {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .lesson-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .lesson-btn.current {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        }

        .header {
            text-align: center;
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-family: 'Fredoka One', cursive;
            color: #ff6b6b;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
        }

        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: #333;
        }

        .slide-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .slide-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .slide-dot.active {
            background: #ff6b6b;
            transform: scale(1.2);
        }

        .slide-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 400px;
        }

        .slide {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .slide.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide h2 {
            font-family: 'Fredoka One', cursive;
            color: #ff6b6b;
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .slide-content {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #555;
            text-align: center;
        }

        .interactive-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
        }

        .quiz-container {
            background: #fff3cd;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #ffeaa7;
        }

        .quiz-question {
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #4ecdc4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .quiz-option.selected {
            background: #4ecdc4;
            color: white;
            border-color: #4ecdc4;
        }

        /* QR Code Builder */
        .qr-builder {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
        }

        .qr-input-group {
            margin-bottom: 20px;
        }

        .qr-input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .qr-input-group input,
        .qr-input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .qr-input-group input:focus,
        .qr-input-group select:focus {
            outline: none;
            border-color: #4ecdc4;
        }

        .qr-preview {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px dashed #4ecdc4;
            margin-bottom: 20px;
        }

        .qr-preview canvas {
            max-width: 200px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .qr-preview.empty {
            color: #999;
            font-style: italic;
        }

        /* Card Creator */
        .card-creator {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
        }

        .card-templates {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .card-template {
            background: white;
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .card-template:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .card-template.selected {
            border-color: #4ecdc4;
            background: #f0fffe;
        }

        .card-template-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #4ecdc4;
        }

        .card-workspace {
            background: white;
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .card-workspace.empty {
            color: #999;
            font-style: italic;
        }

        .card-design {
            width: 100%;
            max-width: 250px;
            aspect-ratio: 1.6;
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card-title {
            font-family: 'Fredoka One', cursive;
            color: white;
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 10px;
        }

        .card-content {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .card-qr-area {
            background: white;
            border-radius: 10px;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80px;
        }

        .card-qr-area canvas {
            max-width: 60px;
            height: auto;
        }

        .card-qr-area.empty {
            color: #999;
            font-style: italic;
            font-size: 0.8rem;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #2ed573 0%, #1e9258 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffa726 0%, #fb8c00 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .upload-area {
            border: 3px dashed #4ecdc4;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
            background: #f0fffe;
        }

        .recap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .recap-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .recap-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #4ecdc4;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }

        .audio-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .audio-button:hover {
            transform: scale(1.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .slide h2 {
                font-size: 1.5rem;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .lesson-buttons {
                justify-content: center;
            }
            
            .card-templates {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* FilePond customization */
        .filepond--root {
            margin-top: 20px;
        }

        .filepond--panel-root {
            background-color: #f0fffe;
            border: 2px dashed #4ecdc4;
        }

        .filepond--drop-label {
            color: #4ecdc4;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Lesson Navigation -->
        <div class="lesson-nav">
            <h3><i class="fas fa-graduation-cap"></i> Pilih Lesson</h3>
            <div class="lesson-buttons">
                <a href="craft-coding-L1.html" class="lesson-btn">L1: Paper Crafts</a>
                <a href="craft-coding-L2.html" class="lesson-btn">L2: Digital Blocks</a>
                <a href="craft-coding-L3.html" class="lesson-btn">L3: Commands</a>
                <a href="craft-coding-L4.html" class="lesson-btn current">L4: QR Codes</a>
                <a href="craft-coding-L5.html" class="lesson-btn">L5: Showcase</a>
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-qrcode"></i> Craft & Coding L4</h1>
            <p>Connecting Crafts with Simple Coding</p>
        </div>

        <!-- Progress Container -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Progress: 0%</div>
        </div>

        <!-- Slide Navigation -->
        <div class="slide-navigation" id="slideNavigation">
            <div class="slide-dot active" onclick="goToSlide(0)">1</div>
            <div class="slide-dot" onclick="goToSlide(1)">2</div>
            <div class="slide-dot" onclick="goToSlide(2)">3</div>
            <div class="slide-dot" onclick="goToSlide(3)">4</div>
            <div class="slide-dot" onclick="goToSlide(4)">5</div>
            <div class="slide-dot" onclick="goToSlide(5)">6</div>
            <div class="slide-dot" onclick="goToSlide(6)">7</div>
        </div>

        <!-- Slide Container -->
        <div class="slide-container">
            <!-- Slide 1: Introduction -->
            <div class="slide active" id="slide-0">
                <h2><i class="fas fa-magic"></i> Hai, Pembuat Kartu Digital Hebat!</h2>
                <div class="slide-content">
                    <p>Pernah scan QR code? Hari ini kita akan membuat kartu keren dengan QR code sendiri!</p>
                    <div class="interactive-box">
                        <h3><i class="fas fa-question-circle"></i> Mari Berkenalan!</h3>
                        <p>Sebelum memulai, mari kita jawab pertanyaan berikut:</p>
                        <div class="quiz-container">
                            <div class="quiz-question">Pernah scan QR code sebelumnya?</div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="selectQuizOption(this, 'intro', 'sering')">
                                    <i class="fas fa-mobile-alt"></i> Sering scan QR code!
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'intro', 'kadang')">
                                    <i class="fas fa-clock"></i> Kadang-kadang
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'intro', 'belum')">
                                    <i class="fas fa-question"></i> Belum pernah
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 2: What is QR Code -->
            <div class="slide" id="slide-1">
                <h2><i class="fas fa-qrcode"></i> Apa Itu QR Code?</h2>
                <div class="slide-content">
                    <p>QR code adalah kotak hitam-putih yang bisa discan untuk membuka video atau website.</p>
                    <div class="interactive-box">
                        <h3><i class="fas fa-brain"></i> Soal Teori #1</h3>
                        <div class="quiz-container">
                            <div class="quiz-question">Apa itu QR code?</div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'a')">
                                    A. Kotak hitam-putih yang bisa discan untuk membuka link
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'b')">
                                    B. Gambar biasa yang tidak bisa discan
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q1', 'c')">
                                    C. Barcode yang hanya ada di toko
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 3: Prepare Your Card -->
            <div class="slide" id="slide-2">
                <h2><i class="fas fa-id-card"></i> Siapkan Kartu Kamu</h2>
                <div class="slide-content">
                    <p>Ambil kertas kartu, pensil warna, dan QR code yang sudah dicetak.</p>
                    <div class="interactive-box">
                        <h3><i class="fas fa-brain"></i> Soal Teori #2</h3>
                        <div class="quiz-container">
                            <div class="quiz-question">Sebutkan dua manfaat kartu dengan QR code.</div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q2', 'a')">
                                    A. Bisa menampilkan info digital dan mudah dibagikan
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q2', 'b')">
                                    B. Membuat kartu lebih berat dan sulit dibawa
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q2', 'c')">
                                    C. Hanya untuk hiasan saja
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 4: Create QR Code -->
            <div class="slide" id="slide-3">
                <h2><i class="fas fa-code"></i> Buat QR Code Kamu!</h2>
                <div class="slide-content">
                    <p>Mari buat QR code yang bisa mengarah ke website atau pesan yang kamu inginkan.</p>
                    <div class="qr-builder">
                        <h3><i class="fas fa-qrcode"></i> Pembuat QR Code</h3>
                        
                        <div class="qr-input-group">
                            <label for="qrType">Jenis QR Code:</label>
                            <select id="qrType" onchange="updateQRType()">
                                <option value="url">Website/URL</option>
                                <option value="text">Pesan Teks</option>
                                <option value="email">Email</option>
                                <option value="phone">Nomor Telepon</option>
                            </select>
                        </div>

                        <div class="qr-input-group">
                            <label for="qrContent" id="qrContentLabel">Masukkan URL:</label>
                            <input type="text" id="qrContent" placeholder="https://example.com" oninput="generateQRCode()">
                        </div>

                        <div class="qr-preview empty" id="qrPreview">
                            QR Code akan muncul di sini setelah kamu mengisi konten
                        </div>

                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="downloadQRCode()">
                                <i class="fas fa-download"></i> Download QR Code
                            </button>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h3><i class="fas fa-brain"></i> Soal Teori #3</h3>
                        <div class="quiz-container">
                            <div class="quiz-question">Kenapa QR code harus ditempel dengan rapi?</div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q3', 'a')">
                                    A. Agar mudah discan dan berfungsi dengan baik
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q3', 'b')">
                                    B. Tidak perlu rapi, yang penting menempel
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q3', 'c')">
                                    C. Hanya untuk hiasan saja
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 5: Design Your Card -->
            <div class="slide" id="slide-4">
                <h2><i class="fas fa-palette"></i> Hias dan Tempel QR Code!</h2>
                <div class="slide-content">
                    <p>Hias kartu dengan gambar keren, lalu tempel QR code di bagian yang mudah dilihat.</p>
                    <div class="card-creator">
                        <h3><i class="fas fa-id-card"></i> Pembuat Kartu Digital</h3>
                        <p>Pilih template kartu yang kamu suka:</p>
                        
                        <div class="card-templates">
                            <div class="card-template" onclick="selectCardTemplate('robot')">
                                <div class="card-template-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div>Robot</div>
                            </div>
                            <div class="card-template" onclick="selectCardTemplate('game')">
                                <div class="card-template-icon">
                                    <i class="fas fa-gamepad"></i>
                                </div>
                                <div>Game</div>
                            </div>
                            <div class="card-template" onclick="selectCardTemplate('music')">
                                <div class="card-template-icon">
                                    <i class="fas fa-music"></i>
                                </div>
                                <div>Musik</div>
                            </div>
                            <div class="card-template" onclick="selectCardTemplate('art')">
                                <div class="card-template-icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div>Seni</div>
                            </div>
                        </div>

                        <div class="card-workspace empty" id="cardWorkspace">
                            Pilih template kartu di atas untuk mulai membuat kartu digital!
                        </div>

                        <div style="text-align: center;">
                            <button class="btn btn-warning" onclick="resetCard()">
                                <i class="fas fa-undo"></i> Reset Kartu
                            </button>
                            <button class="btn btn-success" onclick="saveCard()">
                                <i class="fas fa-save"></i> Simpan Kartu
                            </button>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h3><i class="fas fa-brain"></i> Soal Teori #4</h3>
                        <div class="quiz-container">
                            <div class="quiz-question">Bagaimana cara scan QR code?</div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q4', 'a')">
                                    A. Buka kamera HP dan arahkan ke QR code
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q4', 'b')">
                                    B. Sentuh QR code dengan jari
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q4', 'c')">
                                    C. Ketik angka yang ada di QR code
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 6: Test Your QR Code -->
            <div class="slide" id="slide-5">
                <h2><i class="fas fa-search"></i> Coba Scan QR Code</h2>
                <div class="slide-content">
                    <p>Gunakan handphone untuk scan QR code dan lihat apa yang muncul!</p>
                    <div class="interactive-box">
                        <h3><i class="fas fa-upload"></i> Upload Foto Kartu Digital</h3>
                        <p>Ambil foto kartu digital yang sudah kamu buat dan upload di sini:</p>
                        <div class="upload-area">
                            <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                            <button class="btn btn-primary" onclick="document.getElementById('photoUpload').click()">
                                <i class="fas fa-camera"></i> Pilih Foto
                            </button>
                            <p>atau drag & drop foto ke sini</p>
                            <div id="photoPreview"></div>
                        </div>
                    </div>
                    
                    <div class="interactive-box">
                        <h3><i class="fas fa-brain"></i> Soal Teori #5</h3>
                        <div class="quiz-container">
                            <div class="quiz-question">Apa yang bisa kita masukkan ke QR code?</div>
                            <div class="quiz-options">
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q5', 'a')">
                                    A. Website, pesan teks, email, nomor telepon
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q5', 'b')">
                                    B. Hanya gambar saja
                                </div>
                                <div class="quiz-option" onclick="selectQuizOption(this, 'q5', 'c')">
                                    C. Tidak bisa memasukkan apa-apa
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 7: Congratulations -->
            <div class="slide" id="slide-6">
                <h2><i class="fas fa-trophy"></i> Hebat!</h2>
                <div class="slide-content">
                    <p>Hari ini kamu belajar menghubungkan kerajinan dengan teknologi. Siap buat kerajinan lebih seru di lesson berikutnya?</p>
                    <div class="recap-grid">
                        <div class="recap-card">
                            <div class="recap-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h4>Soal Teori</h4>
                            <p id="quizScore">0/5 Terjawab</p>
                        </div>
                        <div class="recap-card">
                            <div class="recap-icon">
                                <i class="fas fa-qrcode"></i>
                            </div>
                            <h4>QR Code</h4>
                            <p id="qrScore">Belum dibuat</p>
                        </div>
                        <div class="recap-card">
                            <div class="recap-icon">
                                <i class="fas fa-id-card"></i>
                            </div>
                            <h4>Kartu Digital</h4>
                            <p id="cardScore">Belum dibuat</p>
                        </div>
                        <div class="recap-card">
                            <div class="recap-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <h4>Foto Hasil</h4>
                            <p id="photoScore">Belum diupload</p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <a href="craft-coding-L5.html" class="btn btn-success">
                            <i class="fas fa-arrow-right"></i> Lanjut ke L5: Showcase
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
            <button class="btn" onclick="previousSlide()" id="prevBtn">
                <i class="fas fa-arrow-left"></i> Sebelumnya
            </button>
            <button class="btn btn-primary" onclick="nextSlide()" id="nextBtn">
                Selanjutnya <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- Audio Button -->
    <button class="audio-button" onclick="playAudio()" id="audioBtn">
        <i class="fas fa-volume-up"></i>
    </button>

    <!-- FilePond JS -->
    <script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
    <script src="https://unpkg.com/filepond/dist/filepond.js"></script>

    <script>
        // App State
        let currentSlide = 0;
        let totalSlides = 7;
        let quizAnswers = {};
        let qrCodeData = null;
        let cardData = null;
        let uploadedPhoto = null;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            updateSlideNavigation();
            updateProgress();
            setupFileUpload();
            setupDragAndDrop();
        });

        // Slide Navigation
        function goToSlide(slideIndex) {
            document.querySelectorAll('.slide').forEach(slide => slide.classList.remove('active'));
            document.querySelectorAll('.slide-dot').forEach(dot => dot.classList.remove('active'));
            
            document.getElementById(`slide-${slideIndex}`).classList.add('active');
            document.querySelectorAll('.slide-dot')[slideIndex].classList.add('active');
            
            currentSlide = slideIndex;
            updateSlideNavigation();
            saveProgress();
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                goToSlide(currentSlide + 1);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                goToSlide(currentSlide - 1);
            }
        }

        function updateSlideNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentSlide === 0 ? 'none' : 'inline-block';
            nextBtn.innerHTML = currentSlide === totalSlides - 1 ? 
                '<i class="fas fa-check"></i> Selesai' : 
                'Selanjutnya <i class="fas fa-arrow-right"></i>';
        }

        // Quiz System
        function selectQuizOption(element, questionId, answer) {
            // Remove selected class from siblings
            element.parentNode.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            element.classList.add('selected');
            
            // Save answer
            quizAnswers[questionId] = answer;
            
            // Show success message
            showSuccessMessage(element.parentNode.parentNode, 'Jawaban tersimpan!');
            
            // Update progress
            updateProgress();
            saveProgress();
        }

        // QR Code System
        function updateQRType() {
            const qrType = document.getElementById('qrType').value;
            const qrContent = document.getElementById('qrContent');
            const qrContentLabel = document.getElementById('qrContentLabel');
            
            switch(qrType) {
                case 'url':
                    qrContentLabel.textContent = 'Masukkan URL:';
                    qrContent.placeholder = 'https://example.com';
                    break;
                case 'text':
                    qrContentLabel.textContent = 'Masukkan Pesan:';
                    qrContent.placeholder = 'Halo, ini pesan dari QR code!';
                    break;
                case 'email':
                    qrContentLabel.textContent = 'Masukkan Email:';
                    qrContent.placeholder = 'example@email.com';
                    break;
                case 'phone':
                    qrContentLabel.textContent = 'Masukkan Nomor Telepon:';
                    qrContent.placeholder = '+62812345678';
                    break;
            }
            
            // Clear previous QR code
            const qrPreview = document.getElementById('qrPreview');
            qrPreview.innerHTML = 'QR Code akan muncul di sini setelah kamu mengisi konten';
            qrPreview.classList.add('empty');
            
            // Clear input
            qrContent.value = '';
        }

        function generateQRCode() {
            const qrType = document.getElementById('qrType').value;
            const qrContent = document.getElementById('qrContent').value.trim();
            const qrPreview = document.getElementById('qrPreview');
            
            if (!qrContent) {
                qrPreview.innerHTML = 'QR Code akan muncul di sini setelah kamu mengisi konten';
                qrPreview.classList.add('empty');
                qrCodeData = null;
                return;
            }
            
            // Prepare QR content based on type
            let qrData = qrContent;
            switch(qrType) {
                case 'email':
                    qrData = `mailto:${qrContent}`;
                    break;
                case 'phone':
                    qrData = `tel:${qrContent}`;
                    break;
            }
            
            // Clear preview
            qrPreview.innerHTML = '';
            qrPreview.classList.remove('empty');
            
            // Generate QR code
            QRCode.toCanvas(qrData, { width: 200, margin: 2 }, function(error, canvas) {
                if (error) {
                    qrPreview.innerHTML = 'Error: Tidak bisa membuat QR code';
                    qrPreview.classList.add('empty');
                    return;
                }
                
                qrPreview.appendChild(canvas);
                qrCodeData = {
                    content: qrData,
                    type: qrType,
                    canvas: canvas,
                    timestamp: new Date().toISOString()
                };
                
                // Show success message
                showSuccessMessage(qrPreview.parentNode, 'QR Code berhasil dibuat!');
                
                // Update progress
                updateProgress();
                saveProgress();
            });
        }

        function downloadQRCode() {
            if (!qrCodeData) {
                alert('Buat QR code terlebih dahulu!');
                return;
            }
            
            // Create download link
            const link = document.createElement('a');
            link.download = `qr-code-${Date.now()}.png`;
            link.href = qrCodeData.canvas.toDataURL();
            link.click();
            
            showSuccessMessage(document.getElementById('qrPreview').parentNode, 'QR Code berhasil didownload!');
        }

        // Card Creator System
        function selectCardTemplate(template) {
            // Remove selected class from all templates
            document.querySelectorAll('.card-template').forEach(t => {
                t.classList.remove('selected');
            });
            
            // Add selected class to clicked template
            event.target.closest('.card-template').classList.add('selected');
            
            // Create card design
            createCardDesign(template);
        }

        function createCardDesign(template) {
            const workspace = document.getElementById('cardWorkspace');
            workspace.classList.remove('empty');
            
            const templates = {
                robot: { icon: '🤖', title: 'Robot Card', color: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' },
                game: { icon: '🎮', title: 'Game Card', color: 'linear-gradient(135deg, #2ed573 0%, #1e9258 100%)' },
                music: { icon: '🎵', title: 'Music Card', color: 'linear-gradient(135deg, #ffa726 0%, #fb8c00 100%)' },
                art: { icon: '🎨', title: 'Art Card', color: 'linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)' }
            };
            
            const templateData = templates[template];
            
            workspace.innerHTML = `
                <div class="card-design" style="background: ${templateData.color}">
                    <div class="card-title">${templateData.title}</div>
                    <div class="card-content">${templateData.icon}</div>
                    <div class="card-qr-area ${qrCodeData ? '' : 'empty'}" id="cardQRArea">
                        ${qrCodeData ? '' : 'QR Code akan muncul di sini'}
                    </div>
                </div>
            `;
            
            // Add QR code if available
            if (qrCodeData) {
                addQRToCard();
            }
            
            cardData = {
                template,
                templateData,
                timestamp: new Date().toISOString()
            };
            
            // Show success message
            showSuccessMessage(workspace.parentNode, 'Template kartu berhasil dipilih!');
            
            // Update progress
            updateProgress();
            saveProgress();
        }

        function addQRToCard() {
            if (!qrCodeData) return;
            
            const cardQRArea = document.getElementById('cardQRArea');
            if (cardQRArea) {
                cardQRArea.classList.remove('empty');
                
                // Create smaller QR code for card
                QRCode.toCanvas(qrCodeData.content, { width: 60, margin: 1 }, function(error, canvas) {
                    if (!error) {
                        cardQRArea.innerHTML = '';
                        cardQRArea.appendChild(canvas);
                    }
                });
            }
        }

        function resetCard() {
            if (confirm('Reset kartu dan mulai dari awal?')) {
                const workspace = document.getElementById('cardWorkspace');
                workspace.innerHTML = 'Pilih template kartu di atas untuk mulai membuat kartu digital!';
                workspace.classList.add('empty');
                
                // Remove selected class from templates
                document.querySelectorAll('.card-template').forEach(t => {
                    t.classList.remove('selected');
                });
                
                cardData = null;
                updateProgress();
                saveProgress();
            }
        }

        function saveCard() {
            if (!cardData) {
                alert('Buat kartu terlebih dahulu!');
                return;
            }
            
            const cardDataToSave = {
                ...cardData,
                qrCode: qrCodeData
            };
            
            localStorage.setItem('craft-coding-l4-card', JSON.stringify(cardDataToSave));
            
            const workspace = document.getElementById('cardWorkspace');
            showSuccessMessage(workspace.parentNode, 'Kartu berhasil disimpan!');
            
            updateProgress();
        }

        // File Upload System
        function setupFileUpload() {
            const photoUpload = document.getElementById('photoUpload');
            const photoPreview = document.getElementById('photoPreview');
            
            photoUpload.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    handleImageUpload(file);
                }
            });
        }

        function setupDragAndDrop() {
            const uploadArea = document.querySelector('.upload-area');
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = '#44a08d';
                uploadArea.style.backgroundColor = '#e8f5f3';
            });
            
            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = '#4ecdc4';
                uploadArea.style.backgroundColor = '#f0fffe';
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.style.borderColor = '#4ecdc4';
                uploadArea.style.backgroundColor = '#f0fffe';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleImageUpload(files[0]);
                }
            });
        }

        function handleImageUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('Hanya file gambar yang diperbolehkan!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('photoPreview');
                preview.innerHTML = `
                    <img src="${e.target.result}" alt="Foto kartu digital" class="photo-preview">
                    <div class="success-message">
                        <i class="fas fa-check"></i> Foto berhasil diupload!
                    </div>
                `;
                
                uploadedPhoto = {
                    data: e.target.result,
                    name: file.name,
                    timestamp: new Date().toISOString()
                };
                
                updateProgress();
                saveProgress();
            };
            
            reader.readAsDataURL(file);
        }

        // Progress System
        function updateProgress() {
            const totalTasks = 9; // 5 quiz + 1 qr + 1 card + 1 photo + 1 completion
            let completedTasks = 0;
            
            // Count quiz answers
            const quizCount = Object.keys(quizAnswers).length;
            completedTasks += quizCount;
            
            // Count QR code creation
            if (qrCodeData) {
                completedTasks += 1;
            }
            
            // Count card creation
            if (cardData) {
                completedTasks += 1;
            }
            
            // Count photo upload
            if (uploadedPhoto) {
                completedTasks += 1;
            }
            
            // Count completion
            if (currentSlide === totalSlides - 1) {
                completedTasks += 1;
            }
            
            const progressPercentage = Math.round((completedTasks / totalTasks) * 100);
            
            document.getElementById('progressFill').style.width = progressPercentage + '%';
            document.getElementById('progressText').textContent = `Progress: ${progressPercentage}%`;
            
            // Update recap
            updateRecap();
        }

        function updateRecap() {
            const quizCount = Object.keys(quizAnswers).length;
            document.getElementById('quizScore').textContent = `${quizCount}/5 Terjawab`;
            
            const qrStatus = qrCodeData ? 'Sudah dibuat' : 'Belum dibuat';
            document.getElementById('qrScore').textContent = qrStatus;
            
            const cardStatus = cardData ? 'Sudah dibuat' : 'Belum dibuat';
            document.getElementById('cardScore').textContent = cardStatus;
            
            const photoStatus = uploadedPhoto ? 'Sudah diupload' : 'Belum diupload';
            document.getElementById('photoScore').textContent = photoStatus;
        }

        // Audio System
        function playAudio() {
            const slideTexts = [
                'Hai, Pembuat Kartu Digital Hebat! Pernah scan QR code? Hari ini kita akan membuat kartu keren dengan QR code sendiri!',
                'QR code adalah kotak hitam-putih yang bisa discan untuk membuka video atau website.',
                'Ambil kertas kartu, pensil warna, dan QR code yang sudah dicetak.',
                'Mari buat QR code yang bisa mengarah ke website atau pesan yang kamu inginkan.',
                'Hias kartu dengan gambar keren, lalu tempel QR code di bagian yang mudah dilihat.',
                'Gunakan handphone untuk scan QR code dan lihat apa yang muncul!',
                'Hari ini kamu belajar menghubungkan kerajinan dengan teknologi. Siap buat kerajinan lebih seru di lesson berikutnya?'
            ];
            
            alert(`Audio: ${slideTexts[currentSlide]}`);
        }

        // Storage System
        function saveProgress() {
            const progressData = {
                currentSlide,
                quizAnswers,
                qrCodeData: qrCodeData ? {
                    content: qrCodeData.content,
                    type: qrCodeData.type,
                    timestamp: qrCodeData.timestamp
                } : null,
                cardData,
                uploadedPhoto,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('craft-coding-l4-progress', JSON.stringify(progressData));
        }

        function loadProgress() {
            const savedData = localStorage.getItem('craft-coding-l4-progress');
            if (savedData) {
                const progressData = JSON.parse(savedData);
                currentSlide = progressData.currentSlide || 0;
                quizAnswers = progressData.quizAnswers || {};
                cardData = progressData.cardData || null;
                uploadedPhoto = progressData.uploadedPhoto || null;
                
                // Restore QR code data
                if (progressData.qrCodeData) {
                    // Regenerate QR code from saved data
                    setTimeout(() => {
                        document.getElementById('qrType').value = progressData.qrCodeData.type;
                        document.getElementById('qrContent').value = progressData.qrCodeData.content;
                        updateQRType();
                        generateQRCode();
                    }, 100);
                }
                
                // Restore UI state
                goToSlide(currentSlide);
                restoreQuizAnswers();
                restoreCard();
                restorePhoto();
            }
        }

        function restoreQuizAnswers() {
            Object.keys(quizAnswers).forEach(questionId => {
                const answer = quizAnswers[questionId];
                const options = document.querySelectorAll(`[onclick*="${questionId}"]`);
                options.forEach(option => {
                    if (option.getAttribute('onclick').includes(`'${answer}'`)) {
                        option.classList.add('selected');
                    }
                });
            });
        }

        function restoreCard() {
            if (cardData) {
                setTimeout(() => {
                    createCardDesign(cardData.template);
                    
                    // Select the template
                    const templates = document.querySelectorAll('.card-template');
                    templates.forEach(t => {
                        if (t.onclick && t.onclick.toString().includes(cardData.template)) {
                            t.classList.add('selected');
                        }
                    });
                }, 200);
            }
        }

        function restorePhoto() {
            if (uploadedPhoto) {
                const preview = document.getElementById('photoPreview');
                preview.innerHTML = `
                    <img src="${uploadedPhoto.data}" alt="Foto kartu digital" class="photo-preview">
                    <div class="success-message">
                        <i class="fas fa-check"></i> Foto berhasil diupload!
                    </div>
                `;
            }
        }

        // Utility Functions
        function showSuccessMessage(container, message) {
            const existingMessage = container.querySelector('.success-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'success-message';
            messageDiv.innerHTML = `<i class="fas fa-check"></i> ${message}`;
            container.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                previousSlide();
            } else if (e.key === 'ArrowRight') {
                nextSlide();
            }
        });
    </script>
</body>
</html>